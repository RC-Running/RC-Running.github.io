<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Zhuangdong_Course_Note_VFXShader &#183; Runming Chen</title><meta name=title content="Zhuangdong_Course_Note_VFXShader &#183; Runming Chen"><meta name=description content="Zhuangdong_Course_Note_VFXShader"><link rel=canonical href=https://rcrunming.com/notes/courses/zhuangdongcourse/vfxshader/><link type=text/css rel=stylesheet href=/css/main.bundle.min.2755fda1868f0bfc1843df512e7b0b0bec55a259db5f8b13dc3c0f7894e519f617c2b66f5915ec207e2a1ffc8b6d1b53dbd8f3dff8892140cb5eacc50a6edfbb.css integrity="sha512-J1X9oYaPC/wYQ99RLnsLC+xVolnbX4sT3DwPeJTlGfYXwrZvWRXsIH4qH/yLbRtT29jz3/iJIUDLXqzFCm7fuw=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.dc15078f1fe553ce354f85ec1bfce7ded8b4060d4124a49b19e31dd64345b8d8f03edbbb1b681748650181f9d81da9728ca10c2b9cb2ae7bf8983d4b669ba876.js integrity="sha512-3BUHjx/lU841T4XsG/zn3ti0Bg1BJKSbGeMd1kNFuNjwPtu7G2gXSGUBgfnYHalyjKEMK5yyrnv4mD1LZpuodg==" data-copy=Copy data-copied=Copied></script><script src=/lib/zoom/zoom.min.f592a181a15d2a5b042daa7f746c3721acf9063f8b6acd175d989129865a37d400ae0e85b640f9ad42cd98d1f8ad30931718cf8811abdcc5fcb264400d1a2b0c.js integrity="sha512-9ZKhgaFdKlsELap/dGw3Iaz5Bj+Las0XXZiRKYZaN9QArg6FtkD5rULNmNH4rTCTFxjPiBGr3MX8smRADRorDA=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://rcrunming.com/notes/courses/zhuangdongcourse/vfxshader/"><meta property="og:site_name" content="Runming Chen"><meta property="og:title" content="Zhuangdong_Course_Note_VFXShader"><meta property="og:description" content="Zhuangdong_Course_Note_VFXShader"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="notes"><meta property="article:published_time" content="2025-05-27T00:00:00+00:00"><meta property="article:modified_time" content="2025-05-27T00:00:00+00:00"><meta property="og:image" content="https://rcrunming.com/notes/courses/zhuangdongcourse/vfxshader/featured.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rcrunming.com/notes/courses/zhuangdongcourse/vfxshader/featured.jpg"><meta name=twitter:title content="Zhuangdong_Course_Note_VFXShader"><meta name=twitter:description content="Zhuangdong_Course_Note_VFXShader"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Notes","name":"Zhuangdong_Course_Note_VFXShader","headline":"Zhuangdong_Course_Note_VFXShader","description":"Zhuangdong_Course_Note_VFXShader","inLanguage":"en","url":"https:\/\/rcrunming.com\/notes\/courses\/zhuangdongcourse\/vfxshader\/","author":{"@type":"Person","name":"Runming"},"copyrightYear":"2025","dateCreated":"2025-05-27T00:00:00\u002b00:00","datePublished":"2025-05-27T00:00:00\u002b00:00","dateModified":"2025-05-27T00:00:00\u002b00:00","mainEntityOfPage":"true","wordCount":"4105"}]</script><meta name=author content="Runming"><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-KLCF0CEN9Z"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KLCF0CEN9Z")</script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px] z-index-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3 padding-main-menu"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Runming Chen</a></nav><nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12"><a href=/notes/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=Notes>Notes</p></a><a href=/portfolio/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=Portfolio>Portfolio</p></a><div><div class="cursor-pointer flex items-center nested-menu"><span class="ltr:mr-1 rtl:ml-1"><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span></span><div class="text-sm font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title=Zhuangdong_Course_Note_VFXShader>EN</div></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/notes/courses/zhuangdongcourse/vfxshader/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title=Zhuangdong_Course_Note_VFXShader>EN</p></a><a href=/zh-cn/notes/courses/zhuangdongcourse/vfxshader/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="庄懂的技术美术入门课 - 特效着色器">简体中文</p></a></div></div></div></div><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12"><span></span><div><div class="cursor-pointer flex items-center nested-menu"><span class="ltr:mr-1 rtl:ml-1"><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span></span><div class="text-sm font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title=Zhuangdong_Course_Note_VFXShader>EN</div></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/notes/courses/zhuangdongcourse/vfxshader/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title=Zhuangdong_Course_Note_VFXShader>EN</p></a><a href=/zh-cn/notes/courses/zhuangdongcourse/vfxshader/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="庄懂的技术美术入门课 - 特效着色器">简体中文</p></a></div></div></div></div><button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-1 rtl:ml-1"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 md:hidden"><label id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 padding-top-[5px]"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/notes/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=Notes>Notes</p></a></li><li class=mt-1><a href=/portfolio/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=Portfolio>Portfolio</p></a></li></ul></div></label></div></div></div></div><script type=text/javascript src=/js/background-blur.min.4812321520cc2e4cd52bf9137015a55bb6c0b5e66a6b2c96b8654c0ec99be59e8e6425dd838a6fd9bac54000586f37f4a9680bbefaa2aee4601a69e188005cf6.js integrity="sha512-SBIyFSDMLkzVK/kTcBWlW7bAteZqayyWuGVMDsmb5Z6OZCXdg4pv2brFQABYbzf0qWgLvvqiruRgGmnhiABc9g==" data-target-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/notes/courses/zhuangdongcourse/vfxshader/featured_hu_f3a905bc8ab10082.jpg)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script type=text/javascript src=/js/background-blur.min.4812321520cc2e4cd52bf9137015a55bb6c0b5e66a6b2c96b8654c0ec99be59e8e6425dd838a6fd9bac54000586f37f4a9680bbefaa2aee4601a69e188005cf6.js integrity="sha512-SBIyFSDMLkzVK/kTcBWlW7bAteZqayyWuGVMDsmb5Z6OZCXdg4pv2brFQABYbzf0qWgLvvqiruRgGmnhiABc9g==" data-target-id=background-blur></script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Zhuangdong_Course_Note_VFXShader</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><span>4105 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">20 mins</span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#1-alpha-blend-ab>1. Alpha Blend (AB)</a><ul><li><a href=#usage>Usage</a></li><li><a href=#advantages>Advantages</a></li><li><a href=#disadvantages>Disadvantages</a></li><li><a href=#key-code>Key Code</a></li></ul></li><li><a href=#2-additive-ad>2. Additive (AD)</a><ul><li><a href=#usage-1>Usage</a></li><li><a href=#disadvantages-1>Disadvantages</a></li><li><a href=#key-code-1>Key Code</a></li></ul></li><li><a href=#3-alpha-cutout-ac>3. Alpha CutOut (AC)</a><ul><li><a href=#usage-2>Usage</a></li><li><a href=#advantages-1>Advantages</a></li><li><a href=#disadvantages-2>Disadvantages</a></li><li><a href=#key-code-2>Key Code</a></li></ul></li><li><a href=#4-custom-blending>4. Custom Blending</a><ul><li><a href=#usage-3>Usage</a></li><li><a href=#combination>Combination</a></li><li><a href=#elements>Elements</a></li><li><a href=#key-code-3>Key Code</a></li></ul></li></ul><ul><li><a href=#1-sorting-issue>1. Sorting Issue</a><ul><li><a href=#solutions>Solutions</a></li></ul></li><li><a href=#2-premultiplied-texture-issue>2. Premultiplied Texture Issue</a></li><li><a href=#3-example-ghostflow>3. Example: GhostFlow</a><ul><li><a href=#core-idea>Core Idea</a></li></ul></li><li><a href=#4-example-ghostwarp>4. Example: GhostWarp</a><ul><li><a href=#principle>Principle</a></li><li><a href=#note>Note</a></li></ul></li></ul><ul><li><a href=#flame-effect>Flame Effect</a><ul><li><a href=#key-code-4>Key Code</a></li><li><a href=#principle-1>Principle</a></li><li><a href=#key-points>Key Points</a></li></ul></li><li><a href=#water-ripple-effect>Water Ripple Effect</a><ul><li><a href=#key-code-5>Key Code</a></li><li><a href=#principle-2>Principle</a></li></ul></li></ul><ul><li><a href=#screenuv>ScreenUV</a><ul><li><a href=#key-code-6>Key Code</a></li><li><a href=#key-points-1>Key Points</a></li></ul></li><li><a href=#screenwarp>ScreenWarp</a><ul><li><a href=#key-code-7>Key Code</a></li><li><a href=#key-points-2>Key Points</a></li><li><a href=#similar-methods>Similar Methods</a></li></ul></li></ul><ul><li><a href=#principle-of-sequence-animation>Principle of Sequence Animation</a><ul><li><a href=#key-code-8>Key Code</a></li><li><a href=#key-points-summary>Key Points Summary</a></li></ul></li><li><a href=#polar-coordinate-animation-polarcoord>Polar Coordinate Animation (PolarCoord)</a><ul><li><a href=#polar-coordinates>Polar Coordinates</a></li><li><a href=#key-code-9>Key Code</a></li><li><a href=#key-points-summary-1>Key Points Summary</a></li></ul></li></ul><ul><li><a href=#191-translation>19.1 Translation</a><ul><li><a href=#key-code-10>Key Code</a></li><li><a href=#key-points-3>Key Points</a></li></ul></li><li><a href=#192-scale>19.2 Scale</a><ul><li><a href=#key-code-11>Key Code</a></li><li><a href=#key-points-4>Key Points</a></li></ul></li><li><a href=#193-rotation>19.3 Rotation</a><ul><li><a href=#key-code-12>Key Code</a></li><li><a href=#key-points-5>Key Points</a></li></ul></li><li><a href=#194-composite-animation-animationghost>19.4 Composite Animation (AnimationGhost)</a><ul><li><a href=#key-code-13>Key Code</a></li><li><a href=#key-points-6>Key Points</a></li></ul></li></ul><ul><li><a href=#201-clock-pointer-animation>20.1 Clock Pointer Animation</a><ul><li><a href=#key-code-14>Key Code</a></li><li><a href=#key-points-7>Key Points</a></li><li><a href=#c-script-binding-system-time>C# script binding system time</a></li><li><a href=#key-points-8>Key Points</a></li></ul></li><li><a href=#202-shadow-projection-pass>20.2 Shadow Projection Pass</a><ul><li><a href=#key-code-15>Key Code</a></li><li><a href=#key-points-9>Key Points</a></li></ul></li></ul><ul><li><a href=#211-gray-scale-and-noise-control-dissolve>21.1 Gray Scale and Noise Control Dissolve</a><ul><li><a href=#key-structure-and-function>Key Structure and Function</a></li><li><a href=#vertex-shader>Vertex Shader</a></li><li><a href=#fragment-shader>Fragment Shader</a></li><li><a href=#key-points-10>Key Points</a></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#1-alpha-blend-ab>1. Alpha Blend (AB)</a><ul><li><a href=#usage>Usage</a></li><li><a href=#advantages>Advantages</a></li><li><a href=#disadvantages>Disadvantages</a></li><li><a href=#key-code>Key Code</a></li></ul></li><li><a href=#2-additive-ad>2. Additive (AD)</a><ul><li><a href=#usage-1>Usage</a></li><li><a href=#disadvantages-1>Disadvantages</a></li><li><a href=#key-code-1>Key Code</a></li></ul></li><li><a href=#3-alpha-cutout-ac>3. Alpha CutOut (AC)</a><ul><li><a href=#usage-2>Usage</a></li><li><a href=#advantages-1>Advantages</a></li><li><a href=#disadvantages-2>Disadvantages</a></li><li><a href=#key-code-2>Key Code</a></li></ul></li><li><a href=#4-custom-blending>4. Custom Blending</a><ul><li><a href=#usage-3>Usage</a></li><li><a href=#combination>Combination</a></li><li><a href=#elements>Elements</a></li><li><a href=#key-code-3>Key Code</a></li></ul></li></ul><ul><li><a href=#1-sorting-issue>1. Sorting Issue</a><ul><li><a href=#solutions>Solutions</a></li></ul></li><li><a href=#2-premultiplied-texture-issue>2. Premultiplied Texture Issue</a></li><li><a href=#3-example-ghostflow>3. Example: GhostFlow</a><ul><li><a href=#core-idea>Core Idea</a></li></ul></li><li><a href=#4-example-ghostwarp>4. Example: GhostWarp</a><ul><li><a href=#principle>Principle</a></li><li><a href=#note>Note</a></li></ul></li></ul><ul><li><a href=#flame-effect>Flame Effect</a><ul><li><a href=#key-code-4>Key Code</a></li><li><a href=#principle-1>Principle</a></li><li><a href=#key-points>Key Points</a></li></ul></li><li><a href=#water-ripple-effect>Water Ripple Effect</a><ul><li><a href=#key-code-5>Key Code</a></li><li><a href=#principle-2>Principle</a></li></ul></li></ul><ul><li><a href=#screenuv>ScreenUV</a><ul><li><a href=#key-code-6>Key Code</a></li><li><a href=#key-points-1>Key Points</a></li></ul></li><li><a href=#screenwarp>ScreenWarp</a><ul><li><a href=#key-code-7>Key Code</a></li><li><a href=#key-points-2>Key Points</a></li><li><a href=#similar-methods>Similar Methods</a></li></ul></li></ul><ul><li><a href=#principle-of-sequence-animation>Principle of Sequence Animation</a><ul><li><a href=#key-code-8>Key Code</a></li><li><a href=#key-points-summary>Key Points Summary</a></li></ul></li><li><a href=#polar-coordinate-animation-polarcoord>Polar Coordinate Animation (PolarCoord)</a><ul><li><a href=#polar-coordinates>Polar Coordinates</a></li><li><a href=#key-code-9>Key Code</a></li><li><a href=#key-points-summary-1>Key Points Summary</a></li></ul></li></ul><ul><li><a href=#191-translation>19.1 Translation</a><ul><li><a href=#key-code-10>Key Code</a></li><li><a href=#key-points-3>Key Points</a></li></ul></li><li><a href=#192-scale>19.2 Scale</a><ul><li><a href=#key-code-11>Key Code</a></li><li><a href=#key-points-4>Key Points</a></li></ul></li><li><a href=#193-rotation>19.3 Rotation</a><ul><li><a href=#key-code-12>Key Code</a></li><li><a href=#key-points-5>Key Points</a></li></ul></li><li><a href=#194-composite-animation-animationghost>19.4 Composite Animation (AnimationGhost)</a><ul><li><a href=#key-code-13>Key Code</a></li><li><a href=#key-points-6>Key Points</a></li></ul></li></ul><ul><li><a href=#201-clock-pointer-animation>20.1 Clock Pointer Animation</a><ul><li><a href=#key-code-14>Key Code</a></li><li><a href=#key-points-7>Key Points</a></li><li><a href=#c-script-binding-system-time>C# script binding system time</a></li><li><a href=#key-points-8>Key Points</a></li></ul></li><li><a href=#202-shadow-projection-pass>20.2 Shadow Projection Pass</a><ul><li><a href=#key-code-15>Key Code</a></li><li><a href=#key-points-9>Key Points</a></li></ul></li></ul><ul><li><a href=#211-gray-scale-and-noise-control-dissolve>21.1 Gray Scale and Noise Control Dissolve</a><ul><li><a href=#key-structure-and-function>Key Structure and Function</a></li><li><a href=#vertex-shader>Vertex Shader</a></li><li><a href=#fragment-shader>Fragment Shader</a></li><li><a href=#key-points-10>Key Points</a></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h1 class="relative group">13 Four Modes Related to Transparent Effects<div id=13-four-modes-related-to-transparent-effects class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#13-four-modes-related-to-transparent-effects aria-label=Anchor>#</a></span></h1><h2 class="relative group">1. Alpha Blend (AB)<div id=1-alpha-blend-ab class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#1-alpha-blend-ab aria-label=Anchor>#</a></span></h2><h3 class="relative group">Usage<div id=usage class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#usage aria-label=Anchor>#</a></span></h3><ul><li>Objects with complex outlines and no clear edges</li><li>Semi-transparent objects</li><li>General base for effects</li></ul><h3 class="relative group">Advantages<div id=advantages class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#advantages aria-label=Anchor>#</a></span></h3><p>Good performance on mobile, natural edge effect</p><h3 class="relative group">Disadvantages<div id=disadvantages class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#disadvantages aria-label=Anchor>#</a></span></h3><p>Has sorting issues</p><h3 class="relative group">Key Code<div id=key-code class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>Shader</span> <span class=s>&#34;Zhuangdong/AP1/L07/L07_AB&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Properties</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>_MainTex</span> <span class=p>(</span><span class=s>&#34;RGB: Color A: Alpha&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;white&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_Opacity</span> <span class=p>(</span><span class=s>&#34;Opacity&#34;</span><span class=p>,</span> <span class=nf>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>SubShader</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Tags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s>&#34;Queue&#34;</span> <span class=o>=</span> <span class=s>&#34;Transparent&#34;</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Render transparent objects last to prevent objects behind from disappearing
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=s>&#34;RenderType&#34;</span> <span class=o>=</span> <span class=s>&#34;Transparent&#34;</span>
</span></span><span class=line><span class=cl>            <span class=s>&#34;ForceNoShadowCasting&#34;</span> <span class=o>=</span> <span class=s>&#34;True&#34;</span> <span class=c1>// Disable shadow casting
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=s>&#34;IgnoreProject&#34;</span> <span class=o>=</span> <span class=s>&#34;True&#34;</span> <span class=c1>// Does not affect projector
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>Pass</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Name</span> <span class=s>&#34;FORWARD&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>Tags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;LightMode&#34;</span> <span class=o>=</span> <span class=s>&#34;ForwardBase&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>Blend</span> <span class=n>One</span> <span class=n>OneMinusSrcAlpha</span> <span class=c1>// Declare blend mode
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>CGPROGRAM</span> 
</span></span><span class=line><span class=cl>            <span class=err>#</span><span class=n>pragma</span> <span class=n>vertex</span> <span class=n>vert</span> 
</span></span><span class=line><span class=cl>            <span class=err>#</span><span class=n>pragma</span> <span class=n>fragment</span> <span class=n>frag</span> 
</span></span><span class=line><span class=cl>            <span class=err>#</span><span class=n>include</span> <span class=s>&#34;UnityCG.cginc&#34;</span> 
</span></span><span class=line><span class=cl>            <span class=err>#</span><span class=n>pragma</span> <span class=n>multi_compile_fwdbase_fullshadows</span>
</span></span><span class=line><span class=cl>            <span class=cp>#pragma target 3.0 
</span></span></span><span class=line><span class=cl><span class=cp></span>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_MainTex</span><span class=p>;</span> <span class=n>uniform</span> <span class=n>float4</span> <span class=n>_MainTex_ST</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>half</span> <span class=n>_Opacity</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>struct</span> <span class=n>VertexInput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=n>float4</span> <span class=nl>vertex</span> <span class=p>:</span> <span class=n>POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>float2</span> <span class=nl>uv0</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=k>struct</span> <span class=n>VertexOutput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=n>float4</span> <span class=nl>pos</span> <span class=p>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>float2</span> <span class=nl>uv0</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=nf>TRANSFORM_TEX</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>uv0</span><span class=p>,</span> <span class=n>_MainTex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>half4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> <span class=c1>// Standard writing
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half3</span> <span class=n>finalRGB</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span> <span class=n>opacity</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>a</span> <span class=o>*</span> <span class=n>_Opacity</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nf>half4</span><span class=p>(</span><span class=n>finalRGB</span> <span class=o>*</span> <span class=n>opacity</span><span class=p>,</span> <span class=n>opacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>ENDCG</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>FallBack</span> <span class=s>&#34;Diffuse&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L13_AB src=https://c143d82.webp.li/L13_AB.png></figure></p><hr><h2 class="relative group">2. Additive (AD)<div id=2-additive-ad class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#2-additive-ad aria-label=Anchor>#</a></span></h2><h3 class="relative group">Usage<div id=usage-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#usage-1 aria-label=Anchor>#</a></span></h3><ul><li>Luminous objects, glow effects</li><li>Brightening effects</li></ul><h3 class="relative group">Disadvantages<div id=disadvantages-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#disadvantages-1 aria-label=Anchor>#</a></span></h3><ul><li>Has sorting issues</li><li>Multiple layers easily cause overdraw</li><li>For glow effects, usually can be replaced by post-processing</li></ul><h3 class="relative group">Key Code<div id=key-code-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-1 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use AB example as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>SubShader</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>pass</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>        <span class=n>Blend</span> <span class=n>One</span> <span class=n>One</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Just change the BlendMode from the AB example
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L13_AD src=https://c143d82.webp.li/L13_AD.png></figure></p><hr><h2 class="relative group">3. Alpha CutOut (AC)<div id=3-alpha-cutout-ac class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#3-alpha-cutout-ac aria-label=Anchor>#</a></span></h2><h3 class="relative group">Usage<div id=usage-2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#usage-2 aria-label=Anchor>#</a></span></h3><ul><li>Complex outlines, clear edges (e.g. leaves, hair, metal hollow-outs)</li><li>Cartoon effects (with anti-aliasing)</li></ul><h3 class="relative group">Advantages<div id=advantages-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#advantages-1 aria-label=Anchor>#</a></span></h3><p>No sorting issues</p><h3 class="relative group">Disadvantages<div id=disadvantages-2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#disadvantages-2 aria-label=Anchor>#</a></span></h3><p>Edges are harsh, poor performance on mobile</p><h3 class="relative group">Key Code<div id=key-code-2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-2 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use AB example as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>SubShader</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Tags</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;RenderType&#34;</span> <span class=o>=</span> <span class=s>&#34;TransparentCutout&#34;</span> <span class=c1>// Corresponds to AC
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=s>&#34;ForceNoShadowCasting&#34;</span> <span class=o>=</span> <span class=s>&#34;True&#34;</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;IgnoreProject&#34;</span> <span class=o>=</span> <span class=s>&#34;True&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>pass</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>        <span class=n>half4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=n>half4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>half</span> <span class=n>opacity</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nf>clip</span><span class=p>(</span><span class=n>opacity</span> <span class=o>-</span> <span class=n>_Cutoff</span><span class=p>);</span> <span class=c1>// Alpha cutout
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=nf>half4</span><span class=p>(</span><span class=n>var_MainTex</span><span class=p>.</span><span class=n>rgb</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L13_AC src=https://c143d82.webp.li/L13_AC.png></figure></p><hr><h2 class="relative group">4. Custom Blending<div id=4-custom-blending class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#4-custom-blending aria-label=Anchor>#</a></span></h2><h3 class="relative group">Usage<div id=usage-3 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#usage-3 aria-label=Anchor>#</a></span></h3><p>Custom blend formulas for flexible special effects</p><h3 class="relative group">Combination<div id=combination class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#combination aria-label=Anchor>#</a></span></h3><p>Src * SrcFactor op Dst * DstFactor</p><h3 class="relative group">Elements<div id=elements class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#elements aria-label=Anchor>#</a></span></h3><ul><li>Src: Source, the current shader drawing result</li><li>Dst: Destination, the background before the current shader draws</li><li>SrcFactor: Source multiplier</li><li>DstFactor: Destination multiplier</li><li>op: Blend operator</li></ul><p>The multipliers determine how the elements participate in blending, and the operator determines the form of blending. For details, please refer to the Unity official documentation.</p><h3 class="relative group">Key Code<div id=key-code-3 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-3 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>Pass</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Name</span> <span class=s>&#34;FORWARD&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>Tags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;LightMode&#34;</span> <span class=o>=</span> <span class=s>&#34;ForwardBase&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>BlendOp</span> <span class=p>[</span><span class=n>_BlendOp</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>Blend</span> <span class=p>[</span><span class=n>_BlendSrc</span><span class=p>]</span> <span class=p>[</span><span class=n>_BlendDst</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Add the formula after Tags
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>...</span>
</span></span></code></pre></div><hr><h1 class="relative group">15 Common Issues<div id=15-common-issues class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#15-common-issues aria-label=Anchor>#</a></span></h1><h2 class="relative group">1. Sorting Issue<div id=1-sorting-issue class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#1-sorting-issue aria-label=Anchor>#</a></span></h2><p>The front and back relationship is unclear when rendering transparent objects</p><h3 class="relative group">Solutions<div id=solutions class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#solutions aria-label=Anchor>#</a></span></h3><ul><li>Detach/Attach (modify model vertex order with DDC software)</li><li>ZWrite Off (disable depth writing)</li></ul><h2 class="relative group">2. Premultiplied Texture Issue<div id=2-premultiplied-texture-issue class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#2-premultiplied-texture-issue aria-label=Anchor>#</a></span></h2><p>Some texture assets are premultiplied (BaseColor * Alpha), some are not, so the blend mode needs to be distinguished</p><ul><li>AB mode: For premultiplied, use <code>One OneMinusSrcAlpha</code>; for non-premultiplied, use <code>SrcAlpha OneMinusSrcAlpha</code>, or multiply in frag</li><li>AD mode: Premultiplied can have no A channel, non-premultiplied needs to multiply in frag</li></ul><h2 class="relative group">3. Example: GhostFlow<div id=3-example-ghostflow class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#3-example-ghostflow aria-label=Anchor>#</a></span></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use AB as template
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=n>Shader</span> <span class=s>&#34;Zhuangdong/AP1/L08/L08_GhostFlow&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Properties</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nf>_MainTex</span> <span class=p>(</span><span class=s>&#34;RGB: Color A: Alpha&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;gray&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>                <span class=nf>_Opacity</span> <span class=p>(</span><span class=s>&#34;Opacity&#34;</span><span class=p>,</span> <span class=nf>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>                <span class=nf>_WarpTex</span> <span class=p>(</span><span class=s>&#34;Distortion Map&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;gray&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>                <span class=nf>_WarpInt</span> <span class=p>(</span><span class=s>&#34;Distortion Intensity&#34;</span><span class=p>,</span> <span class=nf>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>                <span class=nf>_NoiseInt</span><span class=p>(</span><span class=s>&#34;Noise Intensity&#34;</span><span class=p>,</span> <span class=nf>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>                <span class=nf>_FlowSpeed</span> <span class=p>(</span><span class=s>&#34;Flow Speed&#34;</span><span class=p>,</span> <span class=nf>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>))</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>SubShader</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=p>...</span>
</span></span><span class=line><span class=cl>                <span class=n>Pass</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=p>...</span>
</span></span><span class=line><span class=cl>                    <span class=n>Blend</span> <span class=n>One</span> <span class=n>OneMinusSrcAlpha</span>
</span></span><span class=line><span class=cl>                    <span class=p>...</span>
</span></span><span class=line><span class=cl>                    <span class=k>struct</span> <span class=n>VertexInput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>float4</span> <span class=nl>vertex</span> <span class=p>:</span> <span class=n>POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>float2</span> <span class=nl>uv</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=p>};</span>
</span></span><span class=line><span class=cl>                    <span class=k>struct</span> <span class=n>VertexOutput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>float4</span> <span class=nl>pos</span> <span class=p>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>float2</span> <span class=nl>uv0</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>float2</span> <span class=nl>uv1</span> <span class=p>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=p>};</span>
</span></span><span class=line><span class=cl>                    <span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>                        <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>o</span><span class=p>.</span><span class=n>uv1</span> <span class=o>=</span> <span class=nf>TRANSFORM_TEX</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>uv</span><span class=p>,</span> <span class=n>_WarpTex</span><span class=p>);</span> <span class=c1>// Enable Tiling
</span></span></span><span class=line><span class=cl><span class=c1></span>                        <span class=n>o</span><span class=p>.</span><span class=n>uv1</span><span class=p>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>o</span><span class=p>.</span><span class=n>uv1</span><span class=p>.</span><span class=n>y</span> <span class=o>+</span> <span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>_FlowSpeed</span><span class=p>);</span> <span class=c1>// Start V axis flow
</span></span></span><span class=line><span class=cl><span class=c1></span>                        <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=n>half4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>half3</span> <span class=n>var_WarpTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_WarpTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=n>half2</span> <span class=n>uvBias</span> <span class=o>=</span> <span class=p>(</span><span class=n>var_WarpTex</span><span class=p>.</span><span class=n>rg</span> <span class=o>-</span> <span class=mf>0.5</span><span class=p>)</span> <span class=o>*</span> <span class=n>_WarpInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>half2</span> <span class=n>uv0</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span> <span class=o>+</span> <span class=n>uvBias</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>half4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                        <span class=n>half3</span> <span class=n>finalRGB</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>half</span> <span class=n>noise</span> <span class=o>=</span> <span class=nf>lerp</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=n>var_WarpTex</span><span class=p>.</span><span class=n>b</span> <span class=o>*</span> <span class=mf>2.0</span><span class=p>,</span> <span class=n>_NoiseInt</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=n>noise</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>noise</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=n>half</span> <span class=n>opacity</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>a</span> <span class=o>*</span> <span class=n>_Opacity</span> <span class=o>*</span> <span class=n>noise</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=k>return</span> <span class=nf>half4</span><span class=p>(</span><span class=n>finalRGB</span> <span class=o>*</span> <span class=n>opacity</span><span class=p>,</span> <span class=n>opacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=n>ENDCG</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>FallBack</span> <span class=s>&#34;Diffuse&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L15_GhostFlow src=https://c143d82.webp.li/L15_GhostFlow.gif></figure></p><h3 class="relative group">Core Idea<div id=core-idea class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#core-idea aria-label=Anchor>#</a></span></h3><p>By using a distortion map and flow speed parameter, achieve dynamic changes in transparent effects</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>o</span><span class=p>.</span><span class=n>uv1</span><span class=p>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>o</span><span class=p>.</span><span class=n>uv1</span><span class=p>.</span><span class=n>y</span> <span class=o>+</span> <span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>_FlowSpeed</span><span class=p>);</span> <span class=c1>// V axis flow
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>half</span> <span class=n>opacity</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>a</span> <span class=o>*</span> <span class=n>_Opacity</span> <span class=o>*</span> <span class=n>noise</span><span class=p>;</span>
</span></span></code></pre></div><ul><li><code>_Time</code>: A parameter that increases with time, with x, y, z, w components representing different speed levels</li><li><code>_FlowSpeed</code> controls the flow speed</li><li><code>frac</code> takes the fractional part, used here to prevent _Time from growing indefinitely and causing moiré patterns</li><li><code>noise = lerp(1.0, var_WarpTex.b * 2.0, _NoiseInt)</code> ensures brightness does not darken</li><li><code>_NoiseInt</code> The higher this value, the clearer the noise; when above 1, noise contrast increases</li><li><code>max(0.0, noise)</code> prevents negative values that cause color anomalies</li></ul><h2 class="relative group">4. Example: GhostWarp<div id=4-example-ghostwarp class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#4-example-ghostwarp aria-label=Anchor>#</a></span></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use GhostFlow as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>half3</span> <span class=n>var_WarpTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_WarpTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>half2</span> <span class=n>uvBias</span> <span class=o>=</span> <span class=p>(</span><span class=n>var_WarpTex</span><span class=p>.</span><span class=n>rg</span> <span class=o>-</span> <span class=mf>0.5</span><span class=p>)</span> <span class=o>*</span> <span class=n>_WarpInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>half2</span> <span class=n>uv0</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span> <span class=o>+</span> <span class=n>uvBias</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>half4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span></code></pre></div><h3 class="relative group">Principle<div id=principle class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#principle aria-label=Anchor>#</a></span></h3><p>The rg channels of WarpTex control the direction of UV distortion, and -0.5 ensures even distribution of distortion</p><h3 class="relative group">Note<div id=note class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#note aria-label=Anchor>#</a></span></h3><p>When WarpInt is too large, the distortion will be abrupt. This is caused by large grayscale differences between the bright and dark sides</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L15_GhostWarp src=https://c143d82.webp.li/L15_GhostWarp.gif></figure></p><hr><h1 class="relative group">14, 16 Flame and Water Ripple Effect Cases<div id=14-16-flame-and-water-ripple-effect-cases class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#14-16-flame-and-water-ripple-effect-cases aria-label=Anchor>#</a></span></h1><h2 class="relative group">Flame Effect<div id=flame-effect class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#flame-effect aria-label=Anchor>#</a></span></h2><h3 class="relative group">Key Code<div id=key-code-4 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-4 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use GhostFlow as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Shader</span> <span class=s>&#34;Zhuangdong/AP1/L09/L09_Fire&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Properties</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nf>_Mask</span> <span class=p>(</span><span class=s>&#34;R:Outer Flame G:Inner Flame B:Alpha&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;blue&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>                <span class=nf>_Noise</span> <span class=p>(</span><span class=s>&#34;R:Noise1 G:Noise2&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;gray&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>                <span class=nf>_Noise1Params</span> <span class=p>(</span><span class=s>&#34;Noise1 x:Scale y:Speed z:Intensity&#34;</span><span class=p>,</span> <span class=n>vector</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nf>_Noise2Params</span> <span class=p>(</span><span class=s>&#34;Noise2 x:Scale y:Speed z:Intensity&#34;</span><span class=p>,</span> <span class=n>vector</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nf>_color1</span> <span class=p>(</span><span class=s>&#34;Outer Flame Color&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nf>_color2</span> <span class=p>(</span><span class=s>&#34;Inner Flame Color&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>SubShader</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=p>...</span>
</span></span><span class=line><span class=cl>                <span class=n>Pass</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=p>...</span>
</span></span><span class=line><span class=cl>                    <span class=n>Blend</span> <span class=n>One</span> <span class=n>OneMinusSrcAlpha</span>
</span></span><span class=line><span class=cl>                    <span class=p>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=k>struct</span> <span class=n>VertexInput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>float4</span> <span class=nl>vertex</span> <span class=p>:</span> <span class=n>POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>float2</span> <span class=nl>uv</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=p>};</span>
</span></span><span class=line><span class=cl>                    <span class=k>struct</span> <span class=n>VertexOutput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>float4</span> <span class=nl>pos</span> <span class=p>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>float2</span> <span class=nl>uv0</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>float2</span> <span class=nl>uv1</span> <span class=p>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>float2</span> <span class=nl>uv2</span> <span class=p>:</span> <span class=n>TEXCOORD2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=p>};</span>
</span></span><span class=line><span class=cl>                    <span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>                        <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>o</span><span class=p>.</span><span class=n>uv1</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv</span> <span class=o>*</span> <span class=n>_Noise1Params</span><span class=p>.</span><span class=n>x</span> <span class=o>-</span> <span class=nf>float2</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>_Noise1Params</span><span class=p>.</span><span class=n>y</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                        <span class=n>o</span><span class=p>.</span><span class=n>uv2</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv</span> <span class=o>*</span> <span class=n>_Noise2Params</span><span class=p>.</span><span class=n>x</span> <span class=o>-</span> <span class=nf>float2</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>_Noise2Params</span><span class=p>.</span><span class=n>y</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                        <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=n>half4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>half</span> <span class=n>warpMask</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_Mask</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>).</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>half</span> <span class=n>var_Noise1</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_Noise</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv1</span><span class=p>).</span><span class=n>r</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>half</span> <span class=n>var_Noise2</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_Noise</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv2</span><span class=p>).</span><span class=n>g</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>half</span> <span class=n>noise</span> <span class=o>=</span> <span class=n>var_Noise1</span> <span class=o>*</span> <span class=n>_Noise1Params</span><span class=p>.</span><span class=n>z</span> <span class=o>+</span> 
</span></span><span class=line><span class=cl>                                     <span class=n>var_Noise2</span> <span class=o>*</span> <span class=n>_Noise2Params</span><span class=p>.</span><span class=n>z</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>float2</span> <span class=n>warpUV</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span> <span class=o>-</span> <span class=nf>float2</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>noise</span><span class=p>)</span> <span class=o>*</span> <span class=n>warpMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>half3</span> <span class=n>var_Mask</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_Mask</span><span class=p>,</span> <span class=n>warpUV</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=n>half3</span> <span class=n>finalRGB</span> <span class=o>=</span> <span class=n>_color1</span> <span class=o>*</span> <span class=n>var_Mask</span><span class=p>.</span><span class=n>r</span> <span class=o>+</span> <span class=n>_color2</span> <span class=o>*</span> <span class=n>var_Mask</span><span class=p>.</span><span class=n>g</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>half</span> <span class=n>opacity</span> <span class=o>=</span> <span class=n>var_Mask</span><span class=p>.</span><span class=n>r</span> <span class=o>+</span> <span class=n>var_Mask</span><span class=p>.</span><span class=n>g</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=k>return</span> <span class=nf>half4</span><span class=p>(</span><span class=n>finalRGB</span><span class=p>,</span> <span class=n>opacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=n>ENDCG</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>FallBack</span> <span class=s>&#34;Diffuse&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Principle<div id=principle-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#principle-1 aria-label=Anchor>#</a></span></h3><p>Two layers of noise overlay to control flame dynamics, and use mask to customize the color of inner and outer flames</p><h3 class="relative group">Key Points<div id=key-points class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points aria-label=Anchor>#</a></span></h3><ul><li><code>_NoiseParams.x</code> controls tiling</li><li><code>_NoiseParams.y</code> controls speed</li><li><code>_NoiseParams.z</code> controls distortion intensity</li><li><code>float2(0,0, frac())</code> If v.uv - frac(), the texture will flow diagonally, because frac is automatically recognized as float2(frac(), frac())</li></ul><p><figure><img class="my-0 rounded-md" loading=lazy alt=L14_Fire src=https://c143d82.webp.li/L14_Fire.gif></figure></p><h2 class="relative group">Water Ripple Effect<div id=water-ripple-effect class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#water-ripple-effect aria-label=Anchor>#</a></span></h2><h3 class="relative group">Key Code<div id=key-code-5 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-5 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use Fire as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Shader</span> <span class=s>&#34;Zhuangdong/AP1/L09/L09_Water&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Properties</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>_MainTex</span> <span class=p>(</span><span class=s>&#34;Color Texture&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;white&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_WarpTex</span> <span class=p>(</span><span class=s>&#34;Distortion Map&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;gray&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_Speed</span> <span class=p>(</span><span class=s>&#34;x: Speed x y: Speed y&#34;</span><span class=p>,</span> <span class=n>vector</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nf>_Warp1Params</span> <span class=p>(</span><span class=s>&#34;Noise1 x: Scale y: Speed x z: Speed y w: Intensity&#34;</span><span class=p>,</span> <span class=n>vector</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nf>_Warp2Params</span> <span class=p>(</span><span class=s>&#34;Noise2 x: Scale y: Speed x z: Speed y w: Intensity&#34;</span><span class=p>,</span> <span class=n>vector</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>SubShader</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Tags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s>&#34;RenderType&#34;</span> <span class=o>=</span> <span class=s>&#34;Opaque&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>Pass</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Name</span> <span class=s>&#34;FORWARD&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>Tags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;LightMode&#34;</span> <span class=o>=</span> <span class=s>&#34;ForwardBase&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>...</span>
</span></span><span class=line><span class=cl>            <span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>                <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv</span> <span class=o>-</span> <span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>_Speed</span><span class=p>);</span> <span class=c1>// Main texture flow
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>o</span><span class=p>.</span><span class=n>uv1</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv</span> <span class=o>*</span> <span class=n>_Warp1Params</span><span class=p>.</span><span class=n>x</span> <span class=o>-</span> <span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>_Warp1Params</span><span class=p>.</span><span class=n>yz</span><span class=p>);</span> <span class=c1>// Distortion map 1 flow
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>o</span><span class=p>.</span><span class=n>uv2</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv</span> <span class=o>*</span> <span class=n>_Warp2Params</span><span class=p>.</span><span class=n>x</span> <span class=o>-</span> <span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>_Warp2Params</span><span class=p>.</span><span class=n>yz</span><span class=p>);</span> <span class=c1>// Distortion map 2 flow
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>float4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=n>half3</span> <span class=n>var_Warp1</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_WarpTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv1</span><span class=p>).</span><span class=n>rgb</span><span class=p>;</span> <span class=c1>// Distortion value 1
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half3</span> <span class=n>var_Warp2</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_WarpTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv2</span><span class=p>).</span><span class=n>rgb</span><span class=p>;</span> <span class=c1>// Distortion value 2
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half2</span> <span class=n>warp</span> <span class=o>=</span> <span class=p>(</span><span class=n>var_Warp1</span><span class=p>.</span><span class=n>xy</span> <span class=o>-</span> <span class=mf>0.5</span><span class=p>)</span> <span class=o>*</span> <span class=n>_Warp1Params</span><span class=p>.</span><span class=n>w</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                            <span class=p>(</span><span class=n>var_Warp2</span><span class=p>.</span><span class=n>xy</span> <span class=o>-</span> <span class=mf>0.5</span><span class=p>)</span> <span class=o>*</span> <span class=n>_Warp2Params</span><span class=p>.</span><span class=n>w</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>float2</span> <span class=n>warpUV</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span> <span class=o>+</span> <span class=n>warp</span><span class=p>;</span> <span class=c1>// Add distortion value
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>warpUV</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nf>float4</span><span class=p>(</span><span class=n>var_MainTex</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>ENDCG</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>FallBack</span> <span class=s>&#34;Diffuse&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Principle<div id=principle-2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#principle-2 aria-label=Anchor>#</a></span></h3><p>Main texture UV plus two layers of noise to achieve water surface ripple effect</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L16_Water src=https://c143d82.webp.li/L16_Water.gif></figure></p><hr><h1 class="relative group">17 ScreenUV & ScreenWarp<div id=17-screenuv--screenwarp class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#17-screenuv--screenwarp aria-label=Anchor>#</a></span></h1><h2 class="relative group">ScreenUV<div id=screenuv class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#screenuv aria-label=Anchor>#</a></span></h2><p>By sampling in screen space UV, achieve effects where the texture changes and flows with camera distance.</p><p>The key is to use view space coordinates to correct distortion and overlay flow effects.</p><h3 class="relative group">Key Code<div id=key-code-6 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-6 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use AB as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>uv</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>        <span class=n>float3</span> <span class=n>posVS</span> <span class=o>=</span> <span class=nf>UnityObjectToViewPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>).</span><span class=n>xyz</span><span class=p>;</span> <span class=c1>// Vertex position OS to VS
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>o</span><span class=p>.</span><span class=n>screenUV</span> <span class=o>=</span> <span class=n>posVS</span><span class=p>.</span><span class=n>xy</span> <span class=o>/</span> <span class=n>posVS</span><span class=p>.</span><span class=n>z</span><span class=p>;</span> <span class=c1>// VS space distortion correction
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>float</span> <span class=n>originDist</span> <span class=o>=</span> <span class=nf>UnityObjectToViewPos</span><span class=p>(</span><span class=nf>float3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>)).</span><span class=n>z</span><span class=p>;</span> <span class=c1>// Origin position
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>o</span><span class=p>.</span><span class=n>screenUV</span> <span class=o>*=</span> <span class=n>originDist</span><span class=p>;</span> <span class=c1>// o.screenUV * originDist
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>o</span><span class=p>.</span><span class=n>screenUV</span> <span class=o>=</span> <span class=n>o</span><span class=p>.</span><span class=n>screenUV</span> <span class=o>*</span> <span class=n>_ScreenTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>-</span> <span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>_ScreenTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>);</span> <span class=c1>// Add tiling, offset, and flow
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>half4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>half4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>half</span> <span class=n>var_ScreenTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_ScreenTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>screenUV</span><span class=p>).</span><span class=n>r</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>half3</span> <span class=n>finalRGB</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>half</span> <span class=n>opacity</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>a</span> <span class=o>*</span> <span class=n>_Opacity</span> <span class=o>*</span> <span class=n>var_ScreenTex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>half4</span><span class=p>(</span><span class=n>finalRGB</span> <span class=o>*</span> <span class=n>opacity</span><span class=p>,</span> <span class=n>opacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span></code></pre></div><h3 class="relative group">Key Points<div id=key-points-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-1 aria-label=Anchor>#</a></span></h3><ul><li><code>o.screenUV</code> view space corrected UV, prevents depth distortion</li><li><code>originDist</code> controls texture scaling by origin distance</li><li><code>time</code> overlays flow effect</li></ul><p><figure><img class="my-0 rounded-md" loading=lazy alt=L17_ScreenUV src=https://c143d82.webp.li/L17_ScreenUV.gif></figure></p><h2 class="relative group">ScreenWarp<div id=screenwarp class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#screenwarp aria-label=Anchor>#</a></span></h2><p>Use GrabPass to get the background, and use a channel of the main texture to distort the screen UV, achieving background distortion in semi-transparent areas (similar to Photoshop overlay).</p><h3 class="relative group">Key Code<div id=key-code-7 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-7 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>Shader</span> <span class=s>&#34;Zhuangdong/AP1/L10/L10_ScreenWarp&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Properties</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>_MainTex</span> <span class=p>(</span><span class=s>&#34;RGB: Color A: Alpha&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;white&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_Opacity</span> <span class=p>(</span><span class=s>&#34;Opacity&#34;</span><span class=p>,</span> <span class=nf>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>        <span class=nf>_WarpMidVal</span> <span class=p>(</span><span class=s>&#34;Distortion Mid Value&#34;</span><span class=p>,</span> <span class=nf>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>        <span class=nf>_WarpInt</span> <span class=p>(</span><span class=s>&#34;Distortion Intensity&#34;</span><span class=p>,</span> <span class=nf>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.2</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>SubShader</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>        <span class=n>GrabPass</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s>&#34;_BGTex&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>        <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_BGTex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>            <span class=k>struct</span> <span class=n>VertexOutput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=n>float4</span> <span class=nl>pos</span> <span class=p>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>float2</span> <span class=nl>uv0</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>float4</span> <span class=nl>grabPos</span> <span class=p>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span> <span class=c1>// Background sampling coordinates
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>                <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=nf>TRANSFORM_TEX</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>uv0</span><span class=p>,</span> <span class=n>_MainTex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>o</span><span class=p>.</span><span class=n>grabPos</span> <span class=o>=</span> <span class=nf>ComputeGrabScreenPos</span><span class=p>(</span><span class=n>o</span><span class=p>.</span><span class=n>pos</span><span class=p>);</span> <span class=c1>// Background texture sampling coordinates for grabpass
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>half4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=n>half4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>i</span><span class=p>.</span><span class=n>grabPos</span><span class=p>.</span><span class=n>xy</span> <span class=o>+=</span> <span class=p>(</span><span class=n>var_MainTex</span><span class=p>.</span><span class=n>b</span> <span class=o>-</span> <span class=n>_WarpMidVal</span><span class=p>)</span> <span class=o>*</span> <span class=n>_WarpInt</span> <span class=o>*</span> <span class=n>_Opacity</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half3</span> <span class=n>var_BGTex</span> <span class=o>=</span> <span class=nf>tex2Dproj</span><span class=p>(</span><span class=n>_BGTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>grabPos</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>// tex2Dproj is a command specifically for sampling this type of texture
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half3</span> <span class=n>finalRGB</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>var_BGTex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span> <span class=n>opacity</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>a</span> <span class=o>*</span> <span class=n>_Opacity</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nf>half4</span><span class=p>(</span><span class=n>finalRGB</span> <span class=o>*</span> <span class=n>opacity</span><span class=p>,</span> <span class=n>opacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span></code></pre></div><h3 class="relative group">Key Points<div id=key-points-2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-2 aria-label=Anchor>#</a></span></h3><ul><li><code>GrabPass</code> gets the background and saves it in BGTex</li><li><code>WarpMidVal</code> adjusts the UV sampling position</li><li><code>_Opacity</code> is bound to i.grabPos, the lower the opacity, the more obvious the distortion</li></ul><h3 class="relative group">Similar Methods<div id=similar-methods class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#similar-methods aria-label=Anchor>#</a></span></h3><ul><li><code>GrabPass</code>: Suitable for high quality but high performance cost</li><li><code>CommandBuffer</code>: Custom pipeline method before SRP era</li><li><code>Lwrp/Urp</code>: Custom pipeline method after SRP era (recommended)</li></ul><p><figure><img class="my-0 rounded-md" loading=lazy alt=L17_ScreenWarp src=https://c143d82.webp.li/L17_ScreenWarp.png></figure></p><h1 class="relative group">18. Sequence Animation (Sequence)<div id=18-sequence-animation-sequence class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#18-sequence-animation-sequence aria-label=Anchor>#</a></span></h1><h2 class="relative group">Principle of Sequence Animation<div id=principle-of-sequence-animation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#principle-of-sequence-animation aria-label=Anchor>#</a></span></h2><p>In effect production, a sequence texture containing multiple frames is often used, with each frame representing a state of the animation. By switching the UV sampling area, the animation playback effect is achieved.</p><ul><li>The sample texture is 3 rows and 4 columns, with each frame arranged in order.</li><li>The effect layer floats above the object surface (extruded along the normal direction by the vertex).</li><li>The UV origin is at the top left, and the initial sampling area needs to be adjusted.</li></ul><p><figure><img class="my-0 rounded-md" loading=lazy alt=L18_Sequence src=https://c143d82.webp.li/L18_Sequence.gif></figure></p><h3 class="relative group">Key Code<div id=key-code-8 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-8 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Add a pass based on the AB example
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>pass</span><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=n>Name</span> <span class=s>&#34;FORWARD&#34;</span>
</span></span><span class=line><span class=cl><span class=n>Tags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;LightMode&#34;</span> <span class=o>=</span> <span class=s>&#34;ForwardBase&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>Blend</span> <span class=n>One</span> <span class=n>One</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Extrude vertex along normal direction
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span> <span class=o>+=</span> <span class=n>v</span><span class=p>.</span><span class=n>normal</span> <span class=o>*</span> <span class=mf>0.01</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>uv</span> <span class=o>=</span> <span class=nf>TRANSFORM_TEX</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>uv</span><span class=p>,</span> <span class=n>_Sequence</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Calculate current frame index
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>float</span> <span class=n>id</span> <span class=o>=</span> <span class=nf>floor</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>_Speed</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>idV</span> <span class=o>=</span> <span class=nf>floor</span><span class=p>(</span><span class=n>id</span> <span class=o>/</span> <span class=n>_ColCount</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>idU</span> <span class=o>=</span> <span class=n>id</span> <span class=o>-</span> <span class=n>idV</span> <span class=o>*</span> <span class=n>_ColCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>stepU</span> <span class=o>=</span> <span class=mf>1.0</span> <span class=o>/</span> <span class=n>_ColCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>stepV</span> <span class=o>=</span> <span class=mf>1.0</span> <span class=o>/</span> <span class=n>_RowCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// UV scaling and adjust origin to top left
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>float2</span> <span class=n>initUV</span> <span class=o>=</span> <span class=n>o</span><span class=p>.</span><span class=n>uv</span> <span class=o>*</span> <span class=nf>float2</span><span class=p>(</span><span class=n>stepU</span><span class=p>,</span> <span class=n>stepV</span><span class=p>)</span> <span class=o>+</span> <span class=nf>float2</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>stepV</span> <span class=o>*</span> <span class=p>(</span><span class=n>_RowCount</span> <span class=o>-</span><span class=mi>1</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>uv</span> <span class=o>=</span> <span class=n>initUV</span> <span class=o>+</span> <span class=nf>float2</span><span class=p>(</span><span class=n>idU</span> <span class=o>*</span> <span class=n>stepU</span><span class=p>,</span> <span class=o>-</span><span class=n>idV</span> <span class=o>*</span> <span class=n>stepV</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>half4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>half4</span> <span class=n>var_Sequence</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_Sequence</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>half3</span> <span class=n>finalRGB</span> <span class=o>=</span> <span class=n>var_Sequence</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>half</span> <span class=n>opacity</span> <span class=o>=</span> <span class=n>var_Sequence</span><span class=p>.</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>half4</span><span class=p>(</span><span class=n>finalRGB</span> <span class=o>*</span> <span class=n>opacity</span><span class=p>,</span> <span class=n>opacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>ENDCG</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span></code></pre></div><h3 class="relative group">Key Points Summary<div id=key-points-summary class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-summary aria-label=Anchor>#</a></span></h3><ul><li><code>floor</code> rounds down, e.g. 1.9 outputs 1</li><li><code>id</code> moves horizontally by <code>1/_ColCount</code> each time</li><li><code>idV = floor(id / _ColCount)</code> when id is an integer multiple of the column count, idV increases by 1</li><li><code>idU = id - idV * _ColCount</code> moves vertically by <code>1/_RowCount</code> for each full row, and idU resets to zero</li><li><code>float2(idU * stepU, -idV * stepV)</code> moves by <code>1/_ColCount</code> each time, when the number of moves equals <code>_ColCount</code>, idU resets to the leftmost, and moves vertically by <code>1/_RowCount</code></li></ul><p>Note: Effect algorithms should be as simple as possible to avoid overdraw.</p><hr><h2 class="relative group">Polar Coordinate Animation (PolarCoord)<div id=polar-coordinate-animation-polarcoord class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#polar-coordinate-animation-polarcoord aria-label=Anchor>#</a></span></h2><p>Polar coordinate transformation can achieve radial flow, scanning and other effects. By converting UV from Cartesian coordinates to polar coordinates and overlaying time flow, special animation effects are achieved.</p><h3 class="relative group">Polar Coordinates<div id=polar-coordinates class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#polar-coordinates aria-label=Anchor>#</a></span></h3><p>Assume an x-axis, connect the origin to point M, the angle between OM and the x-axis is θ, OM length is P, polar coordinates are (θ, P)</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L18_PolarC src=https://c143d82.webp.li/L18_PolarC.png></figure></p><h3 class="relative group">Key Code<div id=key-code-9 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-9 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>half4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>i</span><span class=p>.</span><span class=n>uv</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span> <span class=o>-</span> <span class=nf>float2</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>theta</span> <span class=o>=</span> <span class=nf>atan2</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>theta</span> <span class=o>=</span> <span class=n>theta</span> <span class=o>/</span> <span class=mf>3.1415926</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=mf>0.5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>p</span> <span class=o>=</span> <span class=nf>length</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>)</span> <span class=o>+</span> <span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>i</span><span class=p>.</span><span class=n>uv</span> <span class=o>=</span> <span class=nf>float2</span><span class=p>(</span><span class=n>theta</span><span class=p>,</span> <span class=n>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>half4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>half3</span> <span class=n>finalRGB</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>rgb</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>half</span> <span class=n>opacity</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>r</span><span class=p>)</span> <span class=o>*</span> <span class=n>_Opacity</span> <span class=o>*</span> <span class=n>i</span><span class=p>.</span><span class=n>color</span><span class=p>.</span><span class=n>r</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>half4</span><span class=p>(</span><span class=n>finalRGB</span> <span class=o>*</span> <span class=n>opacity</span><span class=p>,</span> <span class=n>opacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L18_PolarCoord src=https://c143d82.webp.li/L18_PolarCoord.gif></figure></p><h3 class="relative group">Key Points Summary<div id=key-points-summary-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-summary-1 aria-label=Anchor>#</a></span></h3><ul><li><code>atan2</code> calculates angle θ, result is (-π, π), normalized to [0,1].</li></ul><p><figure><img class="my-0 rounded-md" loading=lazy alt=L18_Atan2 src=https://c143d82.webp.li/L18_Atan2.png></figure></p><ul><li><code>length</code> calculates the distance from point (x, y) to the origin. Since the origin is shifted from (0,0) to (0.5, 0.5), the output will look like this</li></ul><p><figure><img class="my-0 rounded-md" loading=lazy alt=L18_Length src=https://c143d82.webp.li/L18_Length.png></figure></p><ul><li><code>float2(theta, p)</code> maps UV to polar coordinates to achieve radial animation.</li><li><code>i.color</code> vertex color is used to soften the edge.</li></ul><hr><h1 class="relative group">19. Vertex Animation<div id=19-vertex-animation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#19-vertex-animation aria-label=Anchor>#</a></span></h1><h2 class="relative group">19.1 Translation<div id=191-translation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#191-translation aria-label=Anchor>#</a></span></h2><p>Use sine function to make the vertex move periodically in the Y axis direction, achieving an overall up and down floating effect.</p><h3 class="relative group">Key Code<div id=key-code-10 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-10 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use AB as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=cp>#define TWO_PI 6.283185
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>Translation</span> <span class=p>(</span><span class=n>inout</span> <span class=n>float3</span> <span class=n>vertex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>+=</span> <span class=n>_MoveRange</span> <span class=o>*</span> <span class=nf>sin</span><span class=p>(</span><span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>_MoveSpeed</span><span class=p>)</span> <span class=o>*</span> <span class=n>TWO_PI</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>Translation</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L19_Translation src=https://c143d82.webp.li/L19_Translation.gif></figure></p><h3 class="relative group">Key Points<div id=key-points-3 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-3 aria-label=Anchor>#</a></span></h3><ul><li><code>frac</code> Fractional part, takes the decimal part, ensures the time parameter cycles in [0,1], prevents overflow.</li><li><code>sin</code> sin(0, 2π) is a periodic motion from 0 to 1 and back to 0.</li></ul><hr><h2 class="relative group">19.2 Scale<div id=192-scale class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#192-scale aria-label=Anchor>#</a></span></h2><p>All vertices are scaled by the same ratio.</p><h3 class="relative group">Key Code<div id=key-code-11 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-11 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use AB as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>Scaling</span> <span class=p>(</span><span class=n>inout</span> <span class=n>float3</span> <span class=n>vertex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span> <span class=o>*=</span> <span class=mf>1.0</span> <span class=o>+</span> <span class=n>_ScaleRange</span> <span class=o>*</span> <span class=nf>sin</span><span class=p>(</span><span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>_ScaleSpeed</span><span class=p>)</span> <span class=o>*</span> <span class=n>TWO_PI</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>Scaling</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=nf>TRANSFORM_TEX</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>uv0</span><span class=p>,</span> <span class=n>_MainTex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L19_Scaling src=https://c143d82.webp.li/L19_Scaling.gif></figure></p><h3 class="relative group">Key Points<div id=key-points-4 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-4 aria-label=Anchor>#</a></span></h3><p>Ensure the scale value is greater than 0 to avoid reverse scaling.</p><hr><h2 class="relative group">19.3 Rotation<div id=193-rotation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#193-rotation aria-label=Anchor>#</a></span></h2><p>Vertices rotate periodically around the Y axis, achieving effects like head shaking and swinging.</p><h3 class="relative group">Key Code<div id=key-code-12 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-12 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Use AB as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>Rotation</span> <span class=p>(</span><span class=n>inout</span> <span class=n>float3</span> <span class=n>vertex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>angleY</span> <span class=o>=</span> <span class=n>_RotateRange</span> <span class=o>*</span> <span class=nf>sin</span><span class=p>(</span><span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>_Rotatepeed</span><span class=p>)</span> <span class=o>*</span> <span class=n>TWO_PI</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>radY</span> <span class=o>=</span> <span class=nf>radians</span><span class=p>(</span><span class=n>angleY</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>sinY</span><span class=p>,</span> <span class=n>cosY</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>sincos</span><span class=p>(</span><span class=n>radY</span><span class=p>,</span> <span class=n>sinY</span><span class=p>,</span> <span class=n>cosY</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>xz</span> <span class=o>=</span> <span class=nf>float2</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>vertex</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>cosY</span> <span class=o>-</span> <span class=n>vertex</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>sinY</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>vertex</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>sinY</span> <span class=o>+</span> <span class=n>vertex</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>cosY</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L19_Rotation src=https://c143d82.webp.li/L19_Rotation.gif></figure></p><h3 class="relative group">Key Points<div id=key-points-5 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-5 aria-label=Anchor>#</a></span></h3><ul><li><code>radians</code> converts degrees to radians, which improves performance</li><li><code>sincos(raY, sinY, cosY)</code> is equivalent to sinY = sin(radY), cosY = cos(radY), this writing improves performance.</li><li><code>vertex.xz</code> rotation matrix M (x * cosθ - y * sinθ, x * sinθ + y * cosθ)</li></ul><hr><h2 class="relative group">19.4 Composite Animation (AnimationGhost)<div id=194-composite-animation-animationghost class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#194-composite-animation-animationghost aria-label=Anchor>#</a></span></h2><p>Combine scaling, translation, rotation and other animations, and use vertex color to achieve complex movements (such as ghosts, angel rings, etc).</p><h3 class="relative group">Key Code<div id=key-code-13 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-13 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=c1>// Use AB as template
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>AnimGhost</span> <span class=p>(</span><span class=n>inout</span> <span class=n>float3</span> <span class=n>vertex</span><span class=p>,</span> <span class=n>inout</span> <span class=n>float3</span> <span class=n>color</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 天使圈缩放
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>float</span> <span class=n>scale</span> <span class=o>=</span> <span class=n>_ScaleParams</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>color</span><span class=p>.</span><span class=n>g</span> <span class=o>*</span> <span class=nf>sin</span><span class=p>(</span><span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>_ScaleParams</span><span class=p>.</span><span class=n>y</span><span class=p>)</span> <span class=o>*</span> <span class=n>TWO_PI</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span> <span class=o>*=</span> <span class=mf>1.0</span> <span class=o>+</span> <span class=n>scale</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>-=</span> <span class=n>_ScaleParams</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=o>-</span><span class=n>scale</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 幽灵摆动
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>float</span> <span class=n>swingX</span> <span class=o>=</span> <span class=n>_SwingXparams</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=nf>sin</span><span class=p>(</span><span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>_SwingXparams</span><span class=p>.</span><span class=n>y</span> <span class=o>+</span> <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>_SwingXparams</span><span class=p>.</span><span class=n>z</span><span class=p>)</span> <span class=o>*</span> <span class=n>TWO_PI</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>swingZ</span> <span class=o>=</span> <span class=n>_SwingZparams</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=nf>sin</span><span class=p>(</span><span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>_SwingZparams</span><span class=p>.</span><span class=n>y</span> <span class=o>+</span> <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>_SwingZparams</span><span class=p>.</span><span class=n>z</span><span class=p>)</span> <span class=o>*</span> <span class=n>TWO_PI</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>xz</span> <span class=o>+=</span> <span class=nf>float2</span><span class=p>(</span><span class=n>swingX</span><span class=p>,</span> <span class=n>swingZ</span><span class=p>)</span> <span class=o>*</span> <span class=n>color</span><span class=p>.</span><span class=n>r</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 幽灵摇头
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>float</span> <span class=n>radY</span> <span class=o>=</span> <span class=nf>radians</span><span class=p>(</span><span class=n>_ShakeYparams</span><span class=p>.</span><span class=n>x</span><span class=p>)</span> <span class=o>*</span> <span class=p>(</span><span class=mf>1.0</span> <span class=o>-</span> <span class=n>color</span><span class=p>.</span><span class=n>r</span><span class=p>)</span> <span class=o>*</span> <span class=nf>sin</span><span class=p>(</span><span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>_ShakeYparams</span><span class=p>.</span><span class=n>y</span> <span class=o>-</span> <span class=n>color</span><span class=p>.</span><span class=n>g</span> <span class=o>*</span> <span class=n>_ShakeYparams</span><span class=p>.</span><span class=n>z</span><span class=p>)</span> <span class=o>*</span> <span class=n>TWO_PI</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>sinY</span><span class=p>,</span> <span class=n>cosY</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>sincos</span><span class=p>(</span><span class=n>radY</span><span class=p>,</span> <span class=n>sinY</span><span class=p>,</span> <span class=n>cosY</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>xz</span> <span class=o>=</span> <span class=nf>float2</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>vertex</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>cosY</span> <span class=o>-</span> <span class=n>vertex</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>sinY</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>vertex</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>sinY</span> <span class=o>+</span> <span class=n>vertex</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>cosY</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 幽灵起伏
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>float</span> <span class=n>swingY</span> <span class=o>=</span> <span class=n>_SwingYparams</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=nf>sin</span><span class=p>(</span><span class=nf>frac</span><span class=p>(</span><span class=n>_Time</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>_SwingYparams</span><span class=p>.</span><span class=n>y</span> <span class=o>-</span> <span class=n>color</span><span class=p>.</span><span class=n>g</span> <span class=o>*</span> <span class=n>_SwingYparams</span><span class=p>.</span><span class=n>z</span><span class=p>)</span> <span class=o>*</span> <span class=n>TWO_PI</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>+=</span> <span class=n>swingY</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 处理顶点色
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>float</span> <span class=n>lightness</span> <span class=o>=</span> <span class=mf>1.0</span> <span class=o>+</span> <span class=n>color</span><span class=p>.</span><span class=n>g</span> <span class=o>*</span> <span class=mf>1.0</span> <span class=o>+</span> <span class=n>scale</span> <span class=o>*</span> <span class=mf>2.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>color</span> <span class=o>=</span> <span class=nf>float3</span><span class=p>(</span><span class=n>lightness</span><span class=p>,</span> <span class=n>lightness</span><span class=p>,</span> <span class=n>lightness</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L19_AnimGhost src=https://c143d82.webp.li/L19_AnimGhost.gif></figure></p><h3 class="relative group">Key Points<div id=key-points-6 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-6 aria-label=Anchor>#</a></span></h3><ul><li>Use vertex color R, G channels to control different animation areas.</li><li><code>vertex.y -= _ScaleParams.z * -scale</code> is to scale around the model origin, control y axis scale amplitude, avoid angel ring leaving origin</li><li><code>vertex.y * _SwingXparams.z</code> sin result is affected by vertex.y, achieve S-shaped swing</li><li><code>_ShakeYoarams.z</code> <code>_SwingYparams.z</code> make angel ring and other parts of animation, produce time lag</li><li><code>lightness</code> brightness changes with time</li></ul><hr><h1 class="relative group">20. Clock Animation (ClockAnim)<div id=20-clock-animation-clockanim class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#20-clock-animation-clockanim aria-label=Anchor>#</a></span></h1><h2 class="relative group">20.1 Clock Pointer Animation<div id=201-clock-pointer-animation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#201-clock-pointer-animation aria-label=Anchor>#</a></span></h2><p>By C# script obtaining system time, driving Clock pointer rotation in Shader, achieving real clock animation.</p><h3 class="relative group">Key Code<div id=key-code-14 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-14 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>RotateZwithOffset</span><span class=p>(</span><span class=kt>float</span> <span class=n>angle</span><span class=p>,</span> <span class=kt>float</span> <span class=n>offset</span><span class=p>,</span> <span class=kt>float</span> <span class=n>mask</span><span class=p>,</span> <span class=n>inout</span> <span class=n>float3</span> <span class=n>vertex</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>-=</span> <span class=n>offset</span> <span class=o>*</span> <span class=n>mask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>radZ</span> <span class=o>=</span> <span class=nf>radians</span><span class=p>(</span><span class=n>angle</span> <span class=o>*</span> <span class=n>mask</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>sinZ</span><span class=p>,</span> <span class=n>cosZ</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>sincos</span><span class=p>(</span><span class=n>radZ</span><span class=p>,</span> <span class=n>sinZ</span><span class=p>,</span> <span class=n>cosZ</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>xy</span> <span class=o>=</span> <span class=nf>float2</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>vertex</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>cosZ</span> <span class=o>-</span> <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>sinZ</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>vertex</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>sinZ</span> <span class=o>+</span> <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>cosZ</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>+=</span> <span class=n>offset</span> <span class=o>*</span> <span class=n>mask</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>ClockAnim</span><span class=p>(</span><span class=n>float3</span> <span class=n>color</span><span class=p>,</span> <span class=n>inout</span> <span class=n>float3</span> <span class=n>vertex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>RotateZwithOffset</span><span class=p>(</span><span class=n>_HourHandAngle</span><span class=p>,</span> <span class=n>_RotateOffset</span><span class=p>,</span> <span class=n>color</span><span class=p>.</span><span class=n>r</span><span class=p>,</span> <span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>RotateZwithOffset</span><span class=p>(</span><span class=n>_MinuteHandAngle</span><span class=p>,</span> <span class=n>_RotateOffset</span><span class=p>,</span> <span class=n>color</span><span class=p>.</span><span class=n>g</span><span class=p>,</span> <span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>RotateZwithOffset</span><span class=p>(</span><span class=n>_SecondHandAngle</span><span class=p>,</span> <span class=n>_RotateOffset</span><span class=p>,</span> <span class=n>color</span><span class=p>.</span><span class=n>b</span><span class=p>,</span> <span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>ClockAnim</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>color</span><span class=p>.</span><span class=n>rgb</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L20_Clock src=https://c143d82.webp.li/L20_Clock.gif></figure></p><h3 class="relative group">Key Points<div id=key-points-7 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-7 aria-label=Anchor>#</a></span></h3><ul><li><code>angle</code> represents the rotation angle of each time unit</li><li><code>offset</code> adjusts the rotation center. Initial center is at model origin, needs adjustment</li></ul><h3 class="relative group">C# script binding system time<div id=c-script-binding-system-time class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#c-script-binding-system-time aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>System</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>HelloWorld</span> <span class=p>:</span> <span class=n>MonoBehaviour</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// --------- Public -------</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Material</span> <span class=n>clockMat</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// --------- private --------</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>bool</span> <span class=n>valid</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>hourAnglePropID</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>minuteAnglePropID</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>secondAnglePropID</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Start is called before the first frame update</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>clockMat</span> <span class=p>==</span> <span class=kc>null</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>hourAnglePropID</span> <span class=p>=</span> <span class=n>Shader</span><span class=p>.</span><span class=n>PropertyToID</span><span class=p>(</span><span class=s>&#34;_HourHandAngle&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>minuteAnglePropID</span> <span class=p>=</span> <span class=n>Shader</span><span class=p>.</span><span class=n>PropertyToID</span><span class=p>(</span><span class=s>&#34;_MinuteHandAngle&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>secondAnglePropID</span> <span class=p>=</span> <span class=n>Shader</span><span class=p>.</span><span class=n>PropertyToID</span><span class=p>(</span><span class=s>&#34;_SecondHandAngle&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>clockMat</span><span class=p>.</span><span class=n>HasProperty</span><span class=p>(</span><span class=n>hourAnglePropID</span><span class=p>)</span> <span class=p>&amp;&amp;</span> <span class=n>clockMat</span><span class=p>.</span><span class=n>HasProperty</span><span class=p>(</span><span class=n>minuteAnglePropID</span><span class=p>)</span> <span class=p>&amp;&amp;</span> <span class=n>clockMat</span><span class=p>.</span><span class=n>HasProperty</span><span class=p>(</span><span class=n>secondAnglePropID</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>valid</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;hourAnglePropID&#34;</span> <span class=p>+</span> <span class=n>hourAnglePropID</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;minuteAnglePropID&#34;</span> <span class=p>+</span> <span class=n>minuteAnglePropID</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;secondAnglePropID&#34;</span> <span class=p>+</span> <span class=n>secondAnglePropID</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=n>valid</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Update is called once per frame</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Update</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(!</span><span class=n>valid</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>second</span> <span class=p>=</span> <span class=n>DateTime</span><span class=p>.</span><span class=n>Now</span><span class=p>.</span><span class=n>Second</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>secondAngle</span> <span class=p>=</span> <span class=n>second</span> <span class=p>/</span><span class=m>60.0f</span> <span class=p>*</span> <span class=m>360.0f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>clockMat</span><span class=p>.</span><span class=n>SetFloat</span><span class=p>(</span><span class=n>secondAnglePropID</span><span class=p>,</span> <span class=n>secondAngle</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>minute</span> <span class=p>=</span> <span class=n>DateTime</span><span class=p>.</span><span class=n>Now</span><span class=p>.</span><span class=n>Minute</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>minuteAngle</span> <span class=p>=</span> <span class=n>minute</span> <span class=p>/</span><span class=m>60.0f</span> <span class=p>*</span> <span class=m>360.0f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>clockMat</span><span class=p>.</span><span class=n>SetFloat</span><span class=p>(</span><span class=n>minuteAnglePropID</span><span class=p>,</span> <span class=n>minuteAngle</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>hour</span> <span class=p>=</span> <span class=n>DateTime</span><span class=p>.</span><span class=n>Now</span><span class=p>.</span><span class=n>Hour</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>hourAngle</span> <span class=p>=</span> <span class=p>(</span><span class=n>hour</span> <span class=p>%</span> <span class=m>12</span><span class=p>)</span> <span class=p>/</span> <span class=m>12.0f</span> <span class=p>*</span> <span class=m>360.0f</span> <span class=p>+</span> <span class=n>minuteAngle</span> <span class=p>/</span> <span class=m>360.0f</span> <span class=p>*</span> <span class=m>30.0f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>clockMat</span><span class=p>.</span><span class=n>SetFloat</span><span class=p>(</span><span class=n>hourAnglePropID</span><span class=p>,</span> <span class=n>hourAngle</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Key Points<div id=key-points-8 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-8 aria-label=Anchor>#</a></span></h3><ul><li><code>%</code> remainder, ensure hour over 12 to 0</li></ul><hr><h2 class="relative group">20.2 Shadow Projection Pass<div id=202-shadow-projection-pass class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#202-shadow-projection-pass aria-label=Anchor>#</a></span></h2><h3 class="relative group">Key Code<div id=key-code-15 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-code-15 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>Pass</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Name</span> <span class=s>&#34;ShadowCaster&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>Tags</span> <span class=p>{</span> <span class=s>&#34;LightMode&#34;</span> <span class=o>=</span> <span class=s>&#34;ShadowCaster&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>CGPROGRAM</span>
</span></span><span class=line><span class=cl>    <span class=cp>#pragma vertex vert
</span></span></span><span class=line><span class=cl><span class=cp></span>    <span class=cp>#pragma fragment frag
</span></span></span><span class=line><span class=cl><span class=cp></span>    <span class=cp>#pragma multi_compile_shadowcaster
</span></span></span><span class=line><span class=cl><span class=cp></span>    <span class=cp>#include</span> <span class=cpf>&#34;UnityCG.cginc&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl>    <span class=n>uniform</span> <span class=kt>float</span> <span class=n>_HourHandAngle</span><span class=p>,</span> <span class=n>_MinuteHandAngle</span><span class=p>,</span> <span class=n>_SecondHandAngle</span><span class=p>,</span> <span class=n>_RotateOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>appdata</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>float4</span> <span class=nl>vertex</span> <span class=p>:</span> <span class=n>POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>float3</span> <span class=nl>normal</span> <span class=p>:</span> <span class=n>NORMAL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>float3</span> <span class=nl>color</span> <span class=p>:</span> <span class=n>COLOR</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>v2f</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>V2F_SHADOW_CASTER</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>RotateZwithOffset</span><span class=p>(</span><span class=kt>float</span> <span class=n>angle</span><span class=p>,</span> <span class=kt>float</span> <span class=n>offset</span><span class=p>,</span> <span class=kt>float</span> <span class=n>mask</span><span class=p>,</span> <span class=n>inout</span> <span class=n>float3</span> <span class=n>vertex</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>-=</span> <span class=n>offset</span> <span class=o>*</span> <span class=n>mask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>radZ</span> <span class=o>=</span> <span class=nf>radians</span><span class=p>(</span><span class=n>angle</span> <span class=o>*</span> <span class=n>mask</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>sinZ</span><span class=p>,</span> <span class=n>cosZ</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>sincos</span><span class=p>(</span><span class=n>radZ</span><span class=p>,</span> <span class=n>sinZ</span><span class=p>,</span> <span class=n>cosZ</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>vertex</span><span class=p>.</span><span class=n>xy</span> <span class=o>=</span> <span class=nf>float2</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>vertex</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>cosZ</span> <span class=o>-</span> <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>sinZ</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>vertex</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>sinZ</span> <span class=o>+</span> <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>cosZ</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>+=</span> <span class=n>offset</span> <span class=o>*</span> <span class=n>mask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>ClockAnim</span><span class=p>(</span><span class=n>float3</span> <span class=n>color</span><span class=p>,</span> <span class=n>inout</span> <span class=n>float3</span> <span class=n>vertex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>RotateZwithOffset</span><span class=p>(</span><span class=n>_HourHandAngle</span><span class=p>,</span> <span class=n>_RotateOffset</span><span class=p>,</span> <span class=n>color</span><span class=p>.</span><span class=n>r</span><span class=p>,</span> <span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>RotateZwithOffset</span><span class=p>(</span><span class=n>_MinuteHandAngle</span><span class=p>,</span> <span class=n>_RotateOffset</span><span class=p>,</span> <span class=n>color</span><span class=p>.</span><span class=n>g</span><span class=p>,</span> <span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>RotateZwithOffset</span><span class=p>(</span><span class=n>_SecondHandAngle</span><span class=p>,</span> <span class=n>_RotateOffset</span><span class=p>,</span> <span class=n>color</span><span class=p>.</span><span class=n>b</span><span class=p>,</span> <span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>v2f</span> <span class=nf>vert</span><span class=p>(</span><span class=n>appdata</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>v2f</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>ClockAnim</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>color</span><span class=p>.</span><span class=n>rgb</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 关键修复：计算带法线偏移的阴影坐标
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>float3</span> <span class=n>posWS</span> <span class=o>=</span> <span class=nf>mul</span><span class=p>(</span><span class=n>unity_ObjectToWorld</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>).</span><span class=n>xyz</span><span class=p>;</span><span class=c1>//动画后的顶点转世界空间
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>float3</span> <span class=n>normalWS</span> <span class=o>=</span> <span class=nf>UnityObjectToWorldNormal</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span><span class=c1>//法线转世界空间
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityClipSpaceShadowCasterPos</span><span class=p>(</span><span class=n>posWS</span><span class=p>,</span> <span class=n>normalWS</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>TRANSFER_SHADOW_CASTER_NORMALOFFSET</span><span class=p>(</span><span class=n>o</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>float4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>v2f</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>SV_Target</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>SHADOW_CASTER_FRAGMENT</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>ENDCG</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Key Points<div id=key-points-9 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-9 aria-label=Anchor>#</a></span></h3><ul><li><p><code>ShadowCaster</code> is fixed for projection Pass naming and LightMode</p></li><li><p><code>UnityClipSpaceShadowCasterPos(posWS, normalWS)</code> normal offset correction, get animation front normal and animation back vertex, calculate animation back normal direction, finally output animation back vertex position and corrected normal in light cone clipping space coordinates</p></li><li><p><code>V2F_SHADOW_CASTER</code> Unity built-in macro, equivalent to:</p><ul><li>float4 pos : SV_POSITION</li><li>float3 vec : TEXCOORD0 (only used when there is point light)</li></ul></li><li><p><code>TRANSFER_SHADOW_CASTER_NORMALOFFSET(o)</code> input posWS, normalWS, output <code>V2F_SHADOW_CASTER</code></p></li><li><p><code>SHADOW_CASTER_FRAGMENT(i)</code> input pos, process projection according to light type</p></li></ul><p>Note: Only need <code>ShadowCaster</code>, <code>V2F_SHADOW_CASTER</code>, <code>TRANSFER_SHADOW_CASTER_NORMALOFFSET(o)</code>, <code>SHADOW_CASTER_FRAGMENT(i)</code> 4 elements to get a complete shadow projection Pass</p><hr><h1 class="relative group">21. Effect Dissolve Animation Case<div id=21-effect-dissolve-animation-case class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#21-effect-dissolve-animation-case aria-label=Anchor>#</a></span></h1><h2 class="relative group">21.1 Gray Scale and Noise Control Dissolve<div id=211-gray-scale-and-noise-control-dissolve class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#211-gray-scale-and-noise-control-dissolve aria-label=Anchor>#</a></span></h2><p>By multi-channel gray scale map, noise map, and vertex color, achieve complex dissolve effects like mesh disappearance, randomness, and light emission.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L21_CyberPunk src=https://c143d82.webp.li/L21_CyberPunk.gif></figure></p><h3 class="relative group">Key Structure and Function<div id=key-structure-and-function class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-structure-and-function aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>VertexInput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>float4</span> <span class=nl>vertex</span>  <span class=p>:</span> <span class=n>POSITION</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=n>float2</span> <span class=nl>uv0</span>     <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=n>float2</span> <span class=nl>uv1</span>     <span class=p>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>float4</span> <span class=nl>normal</span>  <span class=p>:</span> <span class=n>NORMAL</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=n>float4</span> <span class=nl>tangent</span> <span class=p>:</span> <span class=n>TANGENT</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>    <span class=n>float4</span> <span class=nl>color</span> <span class=p>:</span> <span class=n>COLOR</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=n>VertexOutput</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>float4</span> <span class=nl>pos</span> <span class=p>:</span> <span class=n>SV_POSITION</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=n>float2</span> <span class=nl>uv0</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=n>float2</span> <span class=nl>uv1</span> <span class=p>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>float4</span> <span class=nl>posWS</span> <span class=p>:</span> <span class=n>TEXCOORD2</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>    <span class=n>float3</span> <span class=nl>nDirWS</span> <span class=p>:</span> <span class=n>TEXCOORD3</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>    <span class=n>float3</span> <span class=nl>tDirWS</span> <span class=p>:</span> <span class=n>TEXCOORD4</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>    <span class=n>float3</span> <span class=nl>bDirWS</span> <span class=p>:</span> <span class=n>TEXCOORD5</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>    <span class=n>float4</span> <span class=nl>effectMask</span> <span class=p>:</span> <span class=n>TEXCOORD6</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=nf>LIGHTING_COORDS</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>float4</span> <span class=nf>CyberpunkAnim</span><span class=p>(</span><span class=kt>float</span> <span class=n>noise</span><span class=p>,</span> <span class=kt>float</span> <span class=n>mask</span><span class=p>,</span> <span class=n>float3</span> <span class=n>normal</span><span class=p>,</span> <span class=n>inout</span> <span class=n>float3</span> <span class=n>vertex</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>baseMask</span> <span class=o>=</span> <span class=nf>abs</span><span class=p>(</span><span class=nf>frac</span><span class=p>(</span><span class=n>vertex</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>_EffParams</span><span class=p>.</span><span class=n>x</span> <span class=o>-</span> <span class=n>_Time</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>_EffParams</span><span class=p>.</span><span class=n>y</span><span class=p>)</span> <span class=o>-</span><span class=mf>0.5</span><span class=p>)</span> <span class=o>*</span> <span class=mf>2.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>baseMask</span> <span class=o>=</span> <span class=nf>min</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=n>baseMask</span> <span class=o>*</span> <span class=mf>2.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>baseMask</span> <span class=o>+=</span> <span class=p>(</span><span class=n>noise</span> <span class=o>-</span> <span class=mf>0.5</span><span class=p>)</span> <span class=o>*</span> <span class=n>_EffParams</span><span class=p>.</span><span class=n>z</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>float4</span> <span class=n>effectMask</span> <span class=o>=</span> <span class=nf>float4</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>effectMask</span><span class=p>.</span><span class=n>x</span> <span class=o>=</span> <span class=nf>smoothstep</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.9</span><span class=p>,</span> <span class=n>baseMask</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>effectMask</span><span class=p>.</span><span class=n>y</span> <span class=o>=</span> <span class=nf>smoothstep</span><span class=p>(</span><span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.7</span><span class=p>,</span> <span class=n>baseMask</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>effectMask</span><span class=p>.</span><span class=n>z</span> <span class=o>=</span> <span class=nf>smoothstep</span><span class=p>(</span><span class=mf>0.4</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=n>baseMask</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>effectMask</span><span class=p>.</span><span class=n>w</span> <span class=o>=</span> <span class=n>mask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vertex</span><span class=p>.</span><span class=n>xz</span> <span class=o>+=</span> <span class=n>normal</span><span class=p>.</span><span class=n>xz</span> <span class=o>*</span> <span class=p>(</span><span class=mf>1.0</span> <span class=o>-</span> <span class=n>effectMask</span><span class=p>.</span><span class=n>y</span><span class=p>)</span> <span class=o>*</span> <span class=n>_EffParams</span><span class=p>.</span><span class=n>w</span> <span class=o>*</span> <span class=n>mask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>effectMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Vertex Shader<div id=vertex-shader class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#vertex-shader aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>noise</span> <span class=o>=</span> <span class=nf>tex2Dlod</span><span class=p>(</span><span class=n>_EffectMap02</span><span class=p>,</span> <span class=nf>float4</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>uv1</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>)).</span><span class=n>r</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>effectMask</span> <span class=o>=</span> <span class=nf>CyberpunkAnim</span><span class=p>(</span><span class=n>noise</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>color</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>uv1</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>posWS</span> <span class=o>=</span> <span class=nf>mul</span><span class=p>(</span><span class=n>unity_ObjectToWorld</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>nDirWS</span> <span class=o>=</span> <span class=nf>UnityObjectToWorldNormal</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>tDirWS</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span> <span class=nf>mul</span><span class=p>(</span> <span class=n>unity_ObjectToWorld</span><span class=p>,</span> <span class=nf>float4</span><span class=p>(</span> <span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=mf>0.0</span> <span class=p>)</span> <span class=p>).</span><span class=n>xyz</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span><span class=p>.</span><span class=n>bDirWS</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span><span class=nf>cross</span><span class=p>(</span><span class=n>o</span><span class=p>.</span><span class=n>nDirWS</span><span class=p>,</span> <span class=n>o</span><span class=p>.</span><span class=n>tDirWS</span><span class=p>)</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>w</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>TRANSFER_VERTEX_TO_FRAGMENT</span><span class=p>(</span><span class=n>o</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Fragment Shader<div id=fragment-shader class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#fragment-shader aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>float4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> 
</span></span><span class=line><span class=cl><span class=c1>// ...(向量、光照、采样等略)...
</span></span></span><span class=line><span class=cl><span class=c1>//光照模型
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>float3</span> <span class=n>baseCol</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_BaseColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span>  <span class=n>Lambert</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>nDotl</span><span class=p>);</span><span class=c1>//lambert
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>float</span> <span class=n>specCol</span> <span class=o>=</span> <span class=n>var_SpecTex</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>specpow</span> <span class=o>=</span> <span class=nf>lerp</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>_SpecularPow_Value</span><span class=p>,</span> <span class=n>var_SpecTex</span><span class=p>.</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span>   <span class=n>Phong</span> <span class=o>=</span> <span class=nf>pow</span><span class=p>(</span><span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>vDotr</span><span class=p>),</span> <span class=n>_SpecularPow_Value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>shadow</span> <span class=o>=</span> <span class=nf>LIGHT_ATTENUATION</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>dirlighting</span> <span class=o>=</span> <span class=p>(</span><span class=n>baseCol</span> <span class=o>*</span> <span class=n>Lambert</span> <span class=o>+</span> <span class=n>specCol</span> <span class=o>*</span> <span class=n>Phong</span><span class=p>)</span> <span class=o>*</span> <span class=n>_LightColor0</span> <span class=o>*</span> <span class=n>shadow</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>EnvCol</span> <span class=o>=</span> <span class=nf>TriColAmbient</span><span class=p>(</span><span class=n>nDirWS</span><span class=p>,</span> <span class=n>_TopCol</span><span class=p>,</span> <span class=n>_MidCol</span><span class=p>,</span> <span class=n>_BotCol</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>fresnel</span> <span class=o>=</span> <span class=nf>pow</span><span class=p>(</span><span class=mf>1.0</span> <span class=o>-</span> <span class=n>ndotv</span><span class=p>,</span> <span class=n>_FresnelPow</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>occlusion</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>a</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>envLighting</span> <span class=o>=</span> <span class=p>(</span><span class=n>baseCol</span> <span class=o>*</span> <span class=n>EnvCol</span> <span class=o>*</span> <span class=n>_EnvDiffInt</span> <span class=o>+</span> <span class=n>var_Cubemap</span> <span class=o>*</span> <span class=n>fresnel</span><span class=o>*</span> <span class=n>_EnvSpecint</span> <span class=o>*</span> <span class=n>var_SpecTex</span><span class=p>.</span><span class=n>a</span><span class=p>)</span> <span class=o>*</span> <span class=n>occlusion</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>//自发光
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>float3</span> <span class=n>emission</span> <span class=o>=</span> <span class=n>var_EmitTex</span> <span class=o>*</span> <span class=n>_EmitInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>_EffectMap01_var</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_EffectMap01</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv1</span><span class=p>).</span><span class=n>xyz</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>meshMask</span> <span class=o>=</span> <span class=n>_EffectMap01_var</span><span class=p>.</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>faceRandomMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>_EffectMap01_var</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>faceSlopMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>_EffectMap01_var</span><span class=p>.</span><span class=n>z</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>smallMask</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>effectMask</span><span class=p>.</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>midMask</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>effectMask</span><span class=p>.</span><span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>bigMask</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>effectMask</span><span class=p>.</span><span class=n>z</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>baseMask</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>effectMask</span><span class=p>.</span><span class=n>w</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>midOpacity</span> <span class=o>=</span> <span class=nf>saturate</span><span class=p>(</span><span class=nf>floor</span><span class=p>(</span><span class=nf>min</span><span class=p>(</span><span class=n>faceRandomMask</span><span class=p>,</span> <span class=mf>0.999999</span><span class=p>)</span> <span class=o>+</span> <span class=n>midMask</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>bigOpacity</span> <span class=o>=</span> <span class=nf>saturate</span><span class=p>(</span><span class=nf>floor</span><span class=p>(</span><span class=nf>min</span><span class=p>(</span><span class=n>faceSlopMask</span><span class=p>,</span> <span class=mf>0.999999</span><span class=p>)</span> <span class=o>+</span> <span class=n>bigMask</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>opacity</span> <span class=o>=</span> <span class=nf>lerp</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=nf>min</span><span class=p>(</span><span class=n>bigOpacity</span><span class=p>,</span> <span class=n>midOpacity</span><span class=p>),</span> <span class=n>baseMask</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>meshEmitInt</span> <span class=o>=</span> <span class=p>(</span><span class=n>bigMask</span> <span class=o>-</span> <span class=n>smallMask</span><span class=p>)</span> <span class=o>*</span> <span class=n>meshMask</span><span class=p>;</span><span class=c1>//只在半透明的区域有发光效果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>meshEmitInt</span> <span class=o>=</span> <span class=n>meshEmitInt</span> <span class=o>*</span> <span class=n>meshEmitInt</span> <span class=o>*</span> <span class=mf>2.0</span><span class=p>;</span><span class=c1>//进行固定值的 power，让发光区域缩小
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>emission</span> <span class=o>+=</span> <span class=n>_EffCol</span> <span class=o>*</span> <span class=n>meshEmitInt</span> <span class=o>*</span> <span class=n>baseMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>FinalColor</span> <span class=o>=</span> <span class=n>dirlighting</span> <span class=o>+</span> <span class=n>envLighting</span> <span class=o>+</span> <span class=n>emission</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=nf>float4</span><span class=p>(</span><span class=n>FinalColor</span> <span class=o>*</span> <span class=n>opacity</span><span class=p>,</span> <span class=n>opacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Key Points<div id=key-points-10 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#key-points-10 aria-label=Anchor>#</a></span></h3><ul><li><code>EffMap01</code><ul><li>R - WireframeMap records model wire frame</li><li>G - RandomGrayScale records random gray scale based on surface</li><li>B - DisappearanceGrayscale records uniform depth based on surface</li></ul></li><li><code>EffMap02</code><ul><li>3DPerlinNoise</li></ul></li></ul><p>DisappearanceGrayscale</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L21_CyberPunk_Slop src=https://c143d82.webp.li/L21_CyberPunk_Slop.png></figure></p><p>RandomGrayScale</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L21_CyberPunk_Ramdon src=https://c143d82.webp.li/L21_CyberPunk_Ramdon.png></figure></p><p>贴图制作与合并</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L21_CyberPunk_SD src=https://c143d82.webp.li/L21_CyberPunk_SD.png></figure></p><ul><li><code>mask</code> vertex color, animate only on character</li><li><code>baseMask = abs(frac(vertex.y * _EffParams.x - _Time.x * _EffParams.y) -0.5) * 2.0;</code><ul><li><code>frac(vertex.y)</code> only takes the decimal, visual gradient Linear 1</li><li><code>EffectParams.x</code> controls gradient Linear 1 Tiling</li><li><code>EffectParams.y</code> controls animation speed and direction</li><li><code>abs(frac() -0.5) * 2.0</code> abs takes absolute value, finally result gradient Linear 1 to gradient Linear 3</li></ul></li><li><code>baseMask = min()</code> increases value range to 1</li><li><code>baseMask += (noise - 0.5) * _EffParams.z;</code> makes baseMask value non 1 area change, <code>_EffParams.z</code> controls change intensity</li><li><code>smoothstep</code> adjusts specified area waveform</li><li><code>vertex.xz +=</code> animate transparent area, <code>EffParams.w</code> controls animation intensity</li><li><code>floor</code> less than 1 to 0, greater than 1 to 1</li><li><code>saturate</code> limits value range to (0, 1)</li><li><code>meshEmitInt * meshEmitInt</code> equivalent to Power = value^2</li><li><code>faceRandomMask = max(0.001, _EffectMap01_var.y)</code> prevent negative, negative causes display error</li></ul><p><figure><img class="my-0 rounded-md" loading=lazy alt=L21_CyberPunk_BaseMask src=https://c143d82.webp.li/L21_CyberPunk_BaseMask.png></figure></p></div><h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><a href=/notes/foundation/linearalgebra/essenceoflinearalgebra_part3/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/notes/foundation/linearalgebra/essenceoflinearalgebra_part3/featured_hu_10528a2cb8acaf49.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/notes/foundation/linearalgebra/essenceoflinearalgebra_part3/>EssenceOfLinearAlgebra - 03</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><span>667 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">4 mins</span></div></div><div class="py-1 prose dark:prose-invert"></div></div><div class="px-6 pt-4 pb-2"></div></div></a><a href=/notes/foundation/linearalgebra/essenceoflinearalgebra_part4/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/notes/foundation/linearalgebra/essenceoflinearalgebra_part4/featured_hu_10528a2cb8acaf49.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/notes/foundation/linearalgebra/essenceoflinearalgebra_part4/>EssenceOfLinearAlgebra - 04</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><span>1099 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">6 mins</span></div></div><div class="py-1 prose dark:prose-invert"></div></div><div class="px-6 pt-4 pb-2"></div></div></a><a href=/notes/foundation/linearalgebra/essenceoflinearalgebra_part2/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/notes/foundation/linearalgebra/essenceoflinearalgebra_part2/featured_hu_10528a2cb8acaf49.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/notes/foundation/linearalgebra/essenceoflinearalgebra_part2/>EssenceOfLinearAlgebra - 02</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><span>1458 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div></div><div class="py-1 prose dark:prose-invert"></div></div><div class="px-6 pt-4 pb-2"></div></div></a></section></div><script type=text/javascript src=/js/page.min.407e5b2727c1f241c95d53db24c776bea71bfc18e09511b815d669ad8caca6e9e18a53864ad364b1ccccfa2f2956768d33cfe193bfb64d3406f3b5ece354ba57.js integrity="sha512-QH5bJyfB8kHJXVPbJMd2vqcb/BjglRG4FdZprYyspunhilOGStNksczM+i8pVnaNM8/hk7+2TTQG87Xs41S6Vw==" data-oid=views_Notes/Courses/zhuangdongcourse/vfxshader/index.md data-oid-likes=likes_Notes/Courses/zhuangdongcourse/vfxshader/index.md></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/notes/courses/zhuangdongcourse/lightingmap/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Zhuangdong_Course_Note_LightingMap</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"></span></span></a></span><span></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href title>Changelog</a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">© 2025 Runming Chen. All Rights Reserved.</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-index-500" data-url=https://rcrunming.com/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>