<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Zhuangdong's Technical Art Introduction Course - Forward Rendering &#183; Runming Chen</title><meta name=title content="Zhuangdong's Technical Art Introduction Course - Forward Rendering &#183; Runming Chen"><meta name=description content="Zhuangdong_Course_Note_ForwardRendering"><link rel=canonical href=https://rcrunming.com/notes/courses/zhuangdongcourse/forwardrendering/><link type=text/css rel=stylesheet href=/css/main.bundle.min.2755fda1868f0bfc1843df512e7b0b0bec55a259db5f8b13dc3c0f7894e519f617c2b66f5915ec207e2a1ffc8b6d1b53dbd8f3dff8892140cb5eacc50a6edfbb.css integrity="sha512-J1X9oYaPC/wYQ99RLnsLC+xVolnbX4sT3DwPeJTlGfYXwrZvWRXsIH4qH/yLbRtT29jz3/iJIUDLXqzFCm7fuw=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.dc15078f1fe553ce354f85ec1bfce7ded8b4060d4124a49b19e31dd64345b8d8f03edbbb1b681748650181f9d81da9728ca10c2b9cb2ae7bf8983d4b669ba876.js integrity="sha512-3BUHjx/lU841T4XsG/zn3ti0Bg1BJKSbGeMd1kNFuNjwPtu7G2gXSGUBgfnYHalyjKEMK5yyrnv4mD1LZpuodg==" data-copy=Copy data-copied=Copied></script><script src=/lib/zoom/zoom.min.f592a181a15d2a5b042daa7f746c3721acf9063f8b6acd175d989129865a37d400ae0e85b640f9ad42cd98d1f8ad30931718cf8811abdcc5fcb264400d1a2b0c.js integrity="sha512-9ZKhgaFdKlsELap/dGw3Iaz5Bj+Las0XXZiRKYZaN9QArg6FtkD5rULNmNH4rTCTFxjPiBGr3MX8smRADRorDA=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://rcrunming.com/notes/courses/zhuangdongcourse/forwardrendering/"><meta property="og:site_name" content="Runming Chen"><meta property="og:title" content="Zhuangdong's Technical Art Introduction Course - Forward Rendering"><meta property="og:description" content="Zhuangdong_Course_Note_ForwardRendering"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="notes"><meta property="article:published_time" content="2025-06-26T00:00:00+00:00"><meta property="article:modified_time" content="2025-06-26T00:00:00+00:00"><meta property="og:image" content="https://rcrunming.com/notes/courses/zhuangdongcourse/forwardrendering/featured.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rcrunming.com/notes/courses/zhuangdongcourse/forwardrendering/featured.jpg"><meta name=twitter:title content="Zhuangdong's Technical Art Introduction Course - Forward Rendering"><meta name=twitter:description content="Zhuangdong_Course_Note_ForwardRendering"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Notes","name":"Zhuangdong\u0027s Technical Art Introduction Course - Forward Rendering","headline":"Zhuangdong\u0027s Technical Art Introduction Course - Forward Rendering","description":"Zhuangdong_Course_Note_ForwardRendering","inLanguage":"en","url":"https:\/\/rcrunming.com\/notes\/courses\/zhuangdongcourse\/forwardrendering\/","author":{"@type":"Person","name":"Runming"},"copyrightYear":"2025","dateCreated":"2025-06-26T00:00:00\u002b00:00","datePublished":"2025-06-26T00:00:00\u002b00:00","dateModified":"2025-06-26T00:00:00\u002b00:00","mainEntityOfPage":"true","wordCount":"4090"}]</script><meta name=author content="Runming"><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><script defer type=text/javascript src=/js/mermaid.bundle.9258d4044c1e2c33ffe95c12c42818a81812d9b20f0c8e283e65b8d2745854c8ca14953622c5c489499c47e5762aa352432c64c2d160ffd39056d9be5241571e.js integrity="sha512-kljUBEweLDP/6VwSxCgYqBgS2bIPDI4oPmW40nRYVMjKFJU2IsXEiUmcR+V2KqNSQyxkwtFg/9OQVtm+UkFXHg=="></script><link type=text/css rel=stylesheet href=/lib/katex/katex.min.7e7e35e3ef02b7b437449a44ca3fac62ec1ed39cb8312b680a00fe8ac60badc95b063b694636b8440856f7f5e8c2cc9e6b0efb581179b2656c7e1e97558c7096.css integrity="sha512-fn414+8Ct7Q3RJpEyj+sYuwe05y4MStoCgD+isYLrclbBjtpRja4RAhW9/Xowsyeaw77WBF5smVsfh6XVYxwlg=="><script defer src=/lib/katex/katex.min.cadd45c1af1f44bdaf196dc9b104f1daeb29043f0dc59155ffe22847510a04390a0b7a859400d420a626204f7fc5ddb07c19311de1c66b25e19c2559d3e126a8.js integrity="sha512-yt1Fwa8fRL2vGW3JsQTx2uspBD8NxZFV/+IoR1EKBDkKC3qFlADUIKYmIE9/xd2wfBkxHeHGayXhnCVZ0+EmqA=="></script><script defer src=/lib/katex/auto-render.min.e9b2833d28623d18c071d78ef13e9c79d695122d296af3dbcee7bf1bf6518b0565bab59939267fbc8f5faf696193c20f5caef3e7501969cfb306f6738032730d.js integrity="sha512-6bKDPShiPRjAcdeO8T6cedaVEi0pavPbzue/G/ZRiwVlurWZOSZ/vI9fr2lhk8IPXK7z51AZac+zBvZzgDJzDQ==" onload=renderMathInElement(document.body)></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-KLCF0CEN9Z"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KLCF0CEN9Z")</script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px] z-index-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3 padding-main-menu"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Runming Chen</a></nav><nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12"><a href=/notes/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=Notes>Notes</p></a><a href=/portfolio/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=Portfolio>Portfolio</p></a><div><div class="cursor-pointer flex items-center nested-menu"><span class="ltr:mr-1 rtl:ml-1"><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span></span><div class="text-sm font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Zhuangdong's Technical Art Introduction Course - Forward Rendering">EN</div></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/notes/courses/zhuangdongcourse/forwardrendering/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Zhuangdong's Technical Art Introduction Course - Forward Rendering">EN</p></a><a href=/zh-cn/notes/courses/zhuangdongcourse/forwardrendering/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="庄懂的技术美术入门课 - 前向渲染">简体中文</p></a></div></div></div></div><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12"><span></span><div><div class="cursor-pointer flex items-center nested-menu"><span class="ltr:mr-1 rtl:ml-1"><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span></span><div class="text-sm font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Zhuangdong's Technical Art Introduction Course - Forward Rendering">EN</div></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/notes/courses/zhuangdongcourse/forwardrendering/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Zhuangdong's Technical Art Introduction Course - Forward Rendering">EN</p></a><a href=/zh-cn/notes/courses/zhuangdongcourse/forwardrendering/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="庄懂的技术美术入门课 - 前向渲染">简体中文</p></a></div></div></div></div><button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-1 rtl:ml-1"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 md:hidden"><label id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 padding-top-[5px]"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/notes/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=Notes>Notes</p></a></li><li class=mt-1><a href=/portfolio/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=Portfolio>Portfolio</p></a></li></ul></div></label></div></div></div></div><script type=text/javascript src=/js/background-blur.min.4812321520cc2e4cd52bf9137015a55bb6c0b5e66a6b2c96b8654c0ec99be59e8e6425dd838a6fd9bac54000586f37f4a9680bbefaa2aee4601a69e188005cf6.js integrity="sha512-SBIyFSDMLkzVK/kTcBWlW7bAteZqayyWuGVMDsmb5Z6OZCXdg4pv2brFQABYbzf0qWgLvvqiruRgGmnhiABc9g==" data-target-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/notes/courses/zhuangdongcourse/forwardrendering/featured_hu_f3a905bc8ab10082.jpg)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script type=text/javascript src=/js/background-blur.min.4812321520cc2e4cd52bf9137015a55bb6c0b5e66a6b2c96b8654c0ec99be59e8e6425dd838a6fd9bac54000586f37f4a9680bbefaa2aee4601a69e188005cf6.js integrity="sha512-SBIyFSDMLkzVK/kTcBWlW7bAteZqayyWuGVMDsmb5Z6OZCXdg4pv2brFQABYbzf0qWgLvvqiruRgGmnhiABc9g==" data-target-id=background-blur></script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Zhuangdong's Technical Art Introduction Course - Forward Rendering</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><span>4090 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">20 mins</span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#01-general-rendering-process>01 General Rendering Process</a><ul><li><a href=#rendering-pipeline>Rendering Pipeline</a><ul><li><a href=#model>Model</a></li><li><a href=#input-structure>Input Structure</a></li><li><a href=#vertex-shader>Vertex Shader</a></li><li><a href=#output-structure>Output Structure</a></li><li><a href=#pixel-shader>Pixel Shader</a></li></ul></li><li><a href=#lighting-model>Lighting Model</a><ul><li><a href=#vectors>Vectors</a></li><li><a href=#dot-product>Dot Product</a></li><li><a href=#lambert>Lambert</a></li><li><a href=#half-lambert>Half Lambert</a></li><li><a href=#code>Code</a></li></ul></li></ul></li><li><a href=#02-case-studies>02 Case Studies</a><ul><li><a href=#normal-offset-creating-multiple-highlights>Normal Offset Creating Multiple Highlights</a></li><li><a href=#screen-uv--depth-value>Screen UV & Depth Value</a></li><li><a href=#algorithm-combination>Algorithm Combination</a><ul><li><a href=#texture-node>Texture Node</a></li><li><a href=#power>Power</a></li><li><a href=#length>Length</a></li></ul></li></ul></li><li><a href=#03-basic-code-material-flatcol>03 Basic Code Material FlatCol</a><ul><li><a href=#code-example>Code Example</a></li><li><a href=#custom-material-cases>Custom Material Cases:</a></li></ul></li><li><a href=#04-case-studies>04 Case Studies</a><ul><li><a href=#sss-material>SSS Material</a></li><li><a href=#color-generated-mask>Color Generated Mask</a></li><li><a href=#special-case>Special Case</a></li><li><a href=#pre-integrated-skin-shading>Pre-Integrated Skin Shading</a></li></ul></li><li><a href=#05-diffuse-and-specular-reflection>05 Diffuse and Specular Reflection</a><ul><li><a href=#diffuse-reflection>Diffuse Reflection</a></li><li><a href=#specular-reflection>Specular Reflection</a></li><li><a href=#common-vectors>Common Vectors</a></li><li><a href=#highlight-adjustment>Highlight Adjustment</a></li><li><a href=#case>Case</a></li></ul></li><li><a href=#06-fakeenvreflectgrapepainted-metalbrdf>06 FakeEnvReflect/Grape/Painted Metal/BRDF</a><ul><li><a href=#fakeenvreflect>FakeEnvReflect</a></li><li><a href=#grape>Grape</a></li><li><a href=#painted-metal>Painted Metal</a></li><li><a href=#brdf>BRDF</a></li><li><a href=#brdfexplorer>BRDFExplorer</a></li></ul></li><li><a href=#07-3colambient-and-shadow>07 3ColAmbient and Shadow</a><ul><li><a href=#three-color-ambient-light>Three-Color Ambient Light</a></li><li><a href=#shadow>Shadow</a></li><li><a href=#lighting-composition>Lighting Composition</a></li></ul></li><li><a href=#08-normalmap-implementation-principle>08 NormalMap Implementation Principle</a></li><li><a href=#09-fresnel-matcap-cubemap>09 Fresnel, Matcap, Cubemap</a><ul><li><a href=#fresnel>Fresnel</a></li><li><a href=#matcap>Matcap</a></li><li><a href=#cubemap>Cubemap</a></li></ul></li><li><a href=#10-live-qa>10 Live Q&amp;A</a><ul><li><a href=#modified-pbr>Modified PBR</a></li><li><a href=#changing-uv>Changing UV</a></li></ul></li><li><a href=#11-common-parameters>11 Common Parameters</a><ul><li><a href=#common-parameters-and-functions>Common Parameters and Functions</a></li><li><a href=#common-parameter-types>Common Parameter Types</a></li><li><a href=#parameter-usage-methods>Parameter Usage Methods</a><ul><li><a href=#experience>Experience</a></li><li><a href=#important-notes>Important Notes</a></li><li><a href=#accessible-vertex-input-data>Accessible Vertex Input Data</a></li><li><a href=#common-vertex-output-data-more-customizable-than-the-former>Common Vertex Output Data (more customizable than the former)</a></li><li><a href=#common-vertex-shader-operations>Common Vertex Shader Operations</a></li></ul></li></ul></li><li><a href=#12-ogre-case>12 Ogre Case</a><ul><li><a href=#code-example-1>Code Example</a></li><li><a href=#main-issues>Main Issues</a></li><li><a href=#texture-explanation>Texture Explanation</a><ul><li><a href=#non-shared-textures>Non-shared textures:</a></li><li><a href=#shared-textures>Shared textures</a></li><li><a href=#texture-merging>Texture merging</a></li></ul></li><li><a href=#texture-description>Texture Description</a></li><li><a href=#source-code-explanation>Source Code Explanation</a></li><li><a href=#lighting-composition-1>Lighting Composition</a></li><li><a href=#experience-summary>Experience Summary</a></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#01-general-rendering-process>01 General Rendering Process</a><ul><li><a href=#rendering-pipeline>Rendering Pipeline</a><ul><li><a href=#model>Model</a></li><li><a href=#input-structure>Input Structure</a></li><li><a href=#vertex-shader>Vertex Shader</a></li><li><a href=#output-structure>Output Structure</a></li><li><a href=#pixel-shader>Pixel Shader</a></li></ul></li><li><a href=#lighting-model>Lighting Model</a><ul><li><a href=#vectors>Vectors</a></li><li><a href=#dot-product>Dot Product</a></li><li><a href=#lambert>Lambert</a></li><li><a href=#half-lambert>Half Lambert</a></li><li><a href=#code>Code</a></li></ul></li></ul></li><li><a href=#02-case-studies>02 Case Studies</a><ul><li><a href=#normal-offset-creating-multiple-highlights>Normal Offset Creating Multiple Highlights</a></li><li><a href=#screen-uv--depth-value>Screen UV & Depth Value</a></li><li><a href=#algorithm-combination>Algorithm Combination</a><ul><li><a href=#texture-node>Texture Node</a></li><li><a href=#power>Power</a></li><li><a href=#length>Length</a></li></ul></li></ul></li><li><a href=#03-basic-code-material-flatcol>03 Basic Code Material FlatCol</a><ul><li><a href=#code-example>Code Example</a></li><li><a href=#custom-material-cases>Custom Material Cases:</a></li></ul></li><li><a href=#04-case-studies>04 Case Studies</a><ul><li><a href=#sss-material>SSS Material</a></li><li><a href=#color-generated-mask>Color Generated Mask</a></li><li><a href=#special-case>Special Case</a></li><li><a href=#pre-integrated-skin-shading>Pre-Integrated Skin Shading</a></li></ul></li><li><a href=#05-diffuse-and-specular-reflection>05 Diffuse and Specular Reflection</a><ul><li><a href=#diffuse-reflection>Diffuse Reflection</a></li><li><a href=#specular-reflection>Specular Reflection</a></li><li><a href=#common-vectors>Common Vectors</a></li><li><a href=#highlight-adjustment>Highlight Adjustment</a></li><li><a href=#case>Case</a></li></ul></li><li><a href=#06-fakeenvreflectgrapepainted-metalbrdf>06 FakeEnvReflect/Grape/Painted Metal/BRDF</a><ul><li><a href=#fakeenvreflect>FakeEnvReflect</a></li><li><a href=#grape>Grape</a></li><li><a href=#painted-metal>Painted Metal</a></li><li><a href=#brdf>BRDF</a></li><li><a href=#brdfexplorer>BRDFExplorer</a></li></ul></li><li><a href=#07-3colambient-and-shadow>07 3ColAmbient and Shadow</a><ul><li><a href=#three-color-ambient-light>Three-Color Ambient Light</a></li><li><a href=#shadow>Shadow</a></li><li><a href=#lighting-composition>Lighting Composition</a></li></ul></li><li><a href=#08-normalmap-implementation-principle>08 NormalMap Implementation Principle</a></li><li><a href=#09-fresnel-matcap-cubemap>09 Fresnel, Matcap, Cubemap</a><ul><li><a href=#fresnel>Fresnel</a></li><li><a href=#matcap>Matcap</a></li><li><a href=#cubemap>Cubemap</a></li></ul></li><li><a href=#10-live-qa>10 Live Q&amp;A</a><ul><li><a href=#modified-pbr>Modified PBR</a></li><li><a href=#changing-uv>Changing UV</a></li></ul></li><li><a href=#11-common-parameters>11 Common Parameters</a><ul><li><a href=#common-parameters-and-functions>Common Parameters and Functions</a></li><li><a href=#common-parameter-types>Common Parameter Types</a></li><li><a href=#parameter-usage-methods>Parameter Usage Methods</a><ul><li><a href=#experience>Experience</a></li><li><a href=#important-notes>Important Notes</a></li><li><a href=#accessible-vertex-input-data>Accessible Vertex Input Data</a></li><li><a href=#common-vertex-output-data-more-customizable-than-the-former>Common Vertex Output Data (more customizable than the former)</a></li><li><a href=#common-vertex-shader-operations>Common Vertex Shader Operations</a></li></ul></li></ul></li><li><a href=#12-ogre-case>12 Ogre Case</a><ul><li><a href=#code-example-1>Code Example</a></li><li><a href=#main-issues>Main Issues</a></li><li><a href=#texture-explanation>Texture Explanation</a><ul><li><a href=#non-shared-textures>Non-shared textures:</a></li><li><a href=#shared-textures>Shared textures</a></li><li><a href=#texture-merging>Texture merging</a></li></ul></li><li><a href=#texture-description>Texture Description</a></li><li><a href=#source-code-explanation>Source Code Explanation</a></li><li><a href=#lighting-composition-1>Lighting Composition</a></li><li><a href=#experience-summary>Experience Summary</a></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h2 class="relative group">01 General Rendering Process<div id=01-general-rendering-process class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#01-general-rendering-process aria-label=Anchor>#</a></span></h2><h3 class="relative group">Rendering Pipeline<div id=rendering-pipeline class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#rendering-pipeline aria-label=Anchor>#</a></span></h3><div class=mermaid align=center><pre>
flowchart LR
    Model --> InputStructure
    InputStructure --> VertexShader
    VertexShader --> OutputStructure
    OutputStructure --> PixelShader
</pre></div><h4 class="relative group">Model<div id=model class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#model aria-label=Anchor>#</a></span></h4><p>Contains vertex information (e.g., <code>v 1.0 1.0 -1.0</code>, ID determined by order), triangle face information (e.g., <code>f 5 3 1</code>, numbers are vertex IDs), as well as UV, normals, vertex colors, etc.</p><h4 class="relative group">Input Structure<div id=input-structure class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#input-structure aria-label=Anchor>#</a></span></h4><p>Select the model information that needs to be used.</p><h4 class="relative group">Vertex Shader<div id=vertex-shader class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#vertex-shader aria-label=Anchor>#</a></span></h4><p>Process input information, convert each vertex position to screen space, and calculate/assign other per-vertex information (such as UV, vertex colors, normals, etc.).</p><h4 class="relative group">Output Structure<div id=output-structure class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#output-structure aria-label=Anchor>#</a></span></h4><p>Output specified vertex information.</p><h4 class="relative group">Pixel Shader<div id=pixel-shader class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#pixel-shader aria-label=Anchor>#</a></span></h4><p>Combine environment, lighting, camera, etc., to output the final rendering result.</p><h3 class="relative group">Lighting Model<div id=lighting-model class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#lighting-model aria-label=Anchor>#</a></span></h3><p>Taking the Lambert lighting model as an example, it is the result of the dot product of two vectors.</p><h4 class="relative group">Vectors<div id=vectors class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#vectors aria-label=Anchor>#</a></span></h4><p>For detailed explanation of vectors, please refer to this chapter:</p><h4 class="relative group">Dot Product<div id=dot-product class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#dot-product aria-label=Anchor>#</a></span></h4><p>The dot product result of the main light source vector and normal vector is in the [-1,1] range, determining the light-dark boundary.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L01_Lambert src=https://c143d82.webp.li/L01_Lambert.png></figure></p><h4 class="relative group">Lambert<div id=lambert class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#lambert aria-label=Anchor>#</a></span></h4><p><code>max(0, nDir·lDir)</code>, only takes positive values.</p><h4 class="relative group">Half Lambert<div id=half-lambert class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#half-lambert aria-label=Anchor>#</a></span></h4><p><code>Lambert * 0.5 + 0.5</code>, makes the dark areas softer.</p><h4 class="relative group">Code<div id=code class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#code aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>float</span> <span class=n>lambert</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>nDotl</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>float2</span> <span class=n>uv</span> <span class=o>=</span> <span class=nf>float2</span><span class=p>(</span><span class=n>lambert</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>float4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>uv</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=nf>float4</span><span class=p>(</span><span class=n>var_MainTex</span><span class=p>);</span>
</span></span></code></pre></div><h2 class="relative group">02 Case Studies<div id=02-case-studies class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#02-case-studies aria-label=Anchor>#</a></span></h2><h3 class="relative group">Normal Offset Creating Multiple Highlights<div id=normal-offset-creating-multiple-highlights class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#normal-offset-creating-multiple-highlights aria-label=Anchor>#</a></span></h3><p>Using normal offset to create multiple highlight areas, enriching the highlight performance on object surfaces.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L02_Normaloffset02 src=https://c143d82.webp.li/L02_Normaloffset02.png></figure></p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L02_Normaloffset01 src=https://c143d82.webp.li/L02_Normaloffset01.png></figure></p><h3 class="relative group">Screen UV & Depth Value<div id=screen-uv--depth-value class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#screen-uv--depth-value aria-label=Anchor>#</a></span></h3><p>By multiplying screen UV with depth value, textures can be attached to object surfaces and always face the camera.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L02_Screendepth src=https://c143d82.webp.li/L02_Screendepth.png></figure></p><h3 class="relative group">Algorithm Combination<div id=algorithm-combination class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#algorithm-combination aria-label=Anchor>#</a></span></h3><h4 class="relative group">Texture Node<div id=texture-node class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#texture-node aria-label=Anchor>#</a></span></h4><p>Multiply screen coordinates by tiling count, take the decimal part and limit it to the [-0.5, 0.5] range, then connect to the Length node.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L02_Noise src=https://c143d82.webp.li/L02_Noise.png></figure></p><h4 class="relative group">Power<div id=power class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#power aria-label=Anchor>#</a></span></h4><p>Perform power operation on values to adjust the shape of highlights or other effects.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L02_Noise_Process src=https://c143d82.webp.li/L02_Noise_Process.png></figure></p><h4 class="relative group">Length<div id=length class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#length aria-label=Anchor>#</a></span></h4><p>Length = √(x^2 + y^2 + z^2), when x=y, the result is √0.5 when x=-0.5 or 0.5, and 0 when x=0, forming a periodic cycle.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L02_Length src=https://c143d82.webp.li/L02_Length.png></figure></p><h2 class="relative group">03 Basic Code Material FlatCol<div id=03-basic-code-material-flatcol class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#03-basic-code-material-flatcol aria-label=Anchor>#</a></span></h2><p>FlatCol represents a single-color rendering result. Previous cases were made using ShaderForge node method, but here we start implementing materials with code. Code-implemented materials have advantages in performance and flexibility because the final output instructions are more streamlined.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L03_FlatCol src=https://c143d82.webp.li/L03_FlatCol.png></figure></p><h3 class="relative group">Code Example<div id=code-example class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#code-example aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>Shader</span> <span class=s>&#34;Zhuangdong/AP1/L02/Lambert_U_01&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Properties</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=n>SubShader</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Tags</span> <span class=p>{</span> <span class=s>&#34;RenderType&#34;</span> <span class=o>=</span> <span class=s>&#34;Opaque&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>Pass</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Name</span> <span class=s>&#34;FORWARD&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>Tags</span> <span class=p>{</span> <span class=s>&#34;LightMode&#34;</span> <span class=o>=</span> <span class=s>&#34;ForwardBase&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>CGPROGRAM</span><span class=c1>//Shader compilation directive
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=cp>#pragma vertex vert</span><span class=c1>//Declare vertex shader
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=cp>#pragma fragment frag</span><span class=c1>//Declare fragment shader
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=cp>#include</span> <span class=cpf>&#34;UnityCG.cginc&#34;//Include Unity built-in CG library</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>            <span class=cp>#pragma multi_compile_fwdbase_fullshadows</span><span class=c1>//Enable shadow functionality
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=cp>#pragma target 3.0</span><span class=c1>//Specify shader model version
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>//The above are similar to context, but with more functionality.
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>//Declare vertex shader and fragment shader, so the vert, frag functions below can be enabled.
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>//You can also choose to enable and disable features, such as enabling shadow functionality. And specify shader model version
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>struct</span> <span class=n>VertexInput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=c1>//Import model vertex information and normal information
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>//Words like POSITION NORMAL can be found in UNITY official Document to see their meaning
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>float4</span> <span class=nl>vertex</span> <span class=p>:</span> <span class=n>POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>float3</span> <span class=nl>normal</span> <span class=p>:</span> <span class=n>NORMAL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=k>struct</span> <span class=n>VertexOutput</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>//Convert the above model vertex information to vertex screen position
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>//Convert model normal information to world space normal information
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>float4</span> <span class=nl>pos</span> <span class=p>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>float3</span> <span class=nl>nDirWS</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>//Fixed vertex shader writing: v2f vert (appdata v), Output vert (input variable name)
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span><span class=c1>//Convert model vertex position to vertex screen position
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>o</span><span class=p>.</span><span class=n>nDirWS</span> <span class=o>=</span> <span class=nf>UnityObjectToWorldNormal</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span><span class=c1>//Convert normal to world normal
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>float4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>//Fixed fragment shader writing
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>float3</span> <span class=n>nDir</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>nDirWS</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>float3</span> <span class=n>lDir</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span><span class=n>_WorldSpaceLightPos0</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>//0 represents directional light, xyz represents direction, 1 represents point light, xyz represents point light coordinates
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>//normalize ensures rendering results don&#39;t go wrong
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kt>float</span> <span class=n>nDotl</span> <span class=o>=</span> <span class=p>(</span><span class=nf>dot</span><span class=p>(</span><span class=n>nDir</span><span class=p>,</span> <span class=n>lDir</span><span class=p>)</span><span class=o>*</span><span class=mf>0.5</span><span class=o>+</span><span class=mf>0.5</span><span class=p>);</span><span class=c1>//halflambert
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kt>float</span> <span class=n>lambert</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>nDotl</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>//Some mobile devices treat 0 as 0.1 or similar decimals, so it&#39;s better to write 0.0, otherwise errors will occur.
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>//Using max instead of clamp is because clamp limits both ends, max limits one end, more performance efficient, because dot product won&#39;t be greater than 1
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=nf>float4</span><span class=p>(</span><span class=n>lambert</span><span class=p>,</span> <span class=n>lambert</span><span class=p>,</span> <span class=n>lambert</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>ENDCG</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>FallBack</span> <span class=s>&#34;Diffuse&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Custom Material Cases:<div id=custom-material-cases class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#custom-material-cases aria-label=Anchor>#</a></span></h3><ol><li>Use float4 to customize light direction, implementing custom Lambert model</li><li>Lambert model multiplied by float4 can customize light color</li><li>Lambert model multiplied by float can customize light intensity</li></ol><p><figure><img class="my-0 rounded-md" loading=lazy alt=L03_CustomLambert src=https://c143d82.webp.li/L03_CustomLambert.png></figure></p><h2 class="relative group">04 Case Studies<div id=04-case-studies class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#04-case-studies aria-label=Anchor>#</a></span></h2><h3 class="relative group">SSS Material<div id=sss-material class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#sss-material aria-label=Anchor>#</a></span></h3><p>The core idea of this case is to use textures and parameters together to control the color and range of light-dark boundaries. The first half of the texture U-axis is black, and the second half gradually changes from dark to bright. By adjusting parameters, the color and range near the light-dark boundary line can be changed arbitrarily. This effect is commonly used to simulate the translucency of biological skin, called SSS effect.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L04_SSS src=https://c143d82.webp.li/L04_SSS.png></figure></p><h3 class="relative group">Color Generated Mask<div id=color-generated-mask class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#color-generated-mask aria-label=Anchor>#</a></span></h3><p>This case uses the step function to layer the lighting model. The step function can turn grayscale images into black and white masks. Use custom colors, mix R/G/B channels with Lambert respectively, generate different masks, and finally mix all masks for output.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L04_Colormask02 src=https://c143d82.webp.li/L04_Colormask02.png></figure></p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L04_Colormask01 src=https://c143d82.webp.li/L04_Colormask01.png></figure></p><h3 class="relative group">Special Case<div id=special-case class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#special-case aria-label=Anchor>#</a></span></h3><p>This case mixes textures and lighting models, then partitions the mixed results through Round to obtain custom results.</p><ol><li>Use two groups of textures with different Tiling values for mixing, then adjust grayscale to get the final texture</li><li>Use Half Dir and normal dot product to get a special lighting model that can make lighting change with camera</li><li>Mix grayscale image and lighting model, then process the result with round node to get only black and white boundaries</li><li>Finally assign different colors to black and white areas respectively</li></ol><p><figure><img class="my-0 rounded-md" loading=lazy alt=L04_Customwork src=https://c143d82.webp.li/L04_Customwork.png></figure></p><h3 class="relative group">Pre-Integrated Skin Shading<div id=pre-integrated-skin-shading class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#pre-integrated-skin-shading aria-label=Anchor>#</a></span></h3><p>LUT (Look Up Texture) principle brief description</p><p>$$
D(\theta) = \frac{\int_{-\pi}^{\pi} \cos(\theta + x) \cdot R(2\sin(x/2))dx}{\int_{-\pi}^{\pi} R(2\sin(x/2))dx}
$$</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L04_LUT src=https://c143d82.webp.li/L04_LUT.png></figure></p><h2 class="relative group">05 Diffuse and Specular Reflection<div id=05-diffuse-and-specular-reflection class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#05-diffuse-and-specular-reflection aria-label=Anchor>#</a></span></h2><h3 class="relative group">Diffuse Reflection<div id=diffuse-reflection class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#diffuse-reflection aria-label=Anchor>#</a></span></h3><p>Lambert, nDotl, direction independent. Real-world examples include movie screens.</p><h3 class="relative group">Specular Reflection<div id=specular-reflection class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#specular-reflection aria-label=Anchor>#</a></span></h3><p>Phong/Blinn-Phong, rDotv/nDoth, view direction dependent. Real-world examples include car paint.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L05_Phong src=https://c143d82.webp.li/L05_Phong.png></figure></p><h3 class="relative group">Common Vectors<div id=common-vectors class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#common-vectors aria-label=Anchor>#</a></span></h3><ul><li>nDir Normal direction</li><li>lDir Light direction</li><li>vDir View direction</li><li>rDir Light reflection direction, r = reflect(-l, n)</li><li>hDir Half-angle direction, vector between ldir and vdir</li><li>nDoth The closer hDir and nDir are, the closer the output value is to 1</li></ul><h3 class="relative group">Highlight Adjustment<div id=highlight-adjustment class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#highlight-adjustment aria-label=Anchor>#</a></span></h3><p><code>Power = Value^Exp</code> is a formula commonly used in Phong model, controlling highlight range through Exp</p><h3 class="relative group">Case<div id=case class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#case aria-label=Anchor>#</a></span></h3><p>Combining diffuse and specular reflection</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Fragment shader example
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>float3</span> <span class=n>nDir</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>nDirWS</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>lDir</span> <span class=o>=</span> <span class=n>_WorldSpaceLightPos0</span><span class=p>.</span><span class=n>xyz</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>vDir</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span><span class=n>_WorldSpaceCameraPos</span><span class=p>.</span><span class=n>xyz</span> <span class=o>-</span> <span class=n>i</span><span class=p>.</span><span class=n>posWS</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>rDir</span> <span class=o>=</span> <span class=nf>reflect</span><span class=p>(</span><span class=o>-</span><span class=n>lDir</span><span class=p>,</span> <span class=n>nDir</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>rDotv</span> <span class=o>=</span> <span class=nf>dot</span><span class=p>(</span><span class=n>rDir</span><span class=p>,</span> <span class=n>vDir</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>nDotl</span> <span class=o>=</span> <span class=nf>dot</span><span class=p>(</span><span class=n>nDir</span><span class=p>,</span> <span class=n>lDir</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>Lambert</span> <span class=o>=</span> <span class=n>nDotl</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=mf>0.5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>Phong</span> <span class=o>=</span> <span class=nf>pow</span><span class=p>(</span><span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>rDotv</span><span class=p>),</span> <span class=n>_SpecPow</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>FinalColor</span> <span class=o>=</span> <span class=n>_BaseColor</span> <span class=o>*</span> <span class=n>Lambert</span> <span class=o>+</span> <span class=n>Phong</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=nf>float4</span><span class=p>(</span><span class=n>FinalColor</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span></code></pre></div><p>Note: TEXCOORD is equivalent to register slots reserved for developers in the GPU pipeline, default is float4</p><ul><li>Register placeholder: Marks the input position of vertex data in the shader</li><li>Purpose: Pass UV and custom vector data</li></ul><h2 class="relative group">06 FakeEnvReflect/Grape/Painted Metal/BRDF<div id=06-fakeenvreflectgrapepainted-metalbrdf class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#06-fakeenvreflectgrapepainted-metalbrdf aria-label=Anchor>#</a></span></h2><h3 class="relative group">FakeEnvReflect<div id=fakeenvreflect class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#fakeenvreflect aria-label=Anchor>#</a></span></h3><p>This case maps the grayscale values of cloud2 texture to U coordinates, implementing random grayscale distribution applied to lighting effects.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L06_FakeEnv src=https://c143d82.webp.li/L06_FakeEnv.png></figure></p><h3 class="relative group">Grape<div id=grape class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#grape aria-label=Anchor>#</a></span></h3><p>The case uses Lambert lighting model and LUTRampTex as diffuse reflection, while the highlight part uses Phong model. Finally, adjust color and highlight changes through cloud2 texture.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L06_Grape src=https://c143d82.webp.li/L06_Grape.png></figure></p><h3 class="relative group">Painted Metal<div id=painted-metal class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#painted-metal aria-label=Anchor>#</a></span></h3><p>This case uses cloud2 to generate masks, lerp mixing different material performances. One part has specular reflection, the other doesn&rsquo;t.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L06_PaintDrop src=https://c143d82.webp.li/L06_PaintDrop.png></figure></p><h3 class="relative group">BRDF<div id=brdf class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#brdf aria-label=Anchor>#</a></span></h3><p>Can be understood as a function that inputs light, view angle and surface parameters, outputs reflection distribution. Lambert and Phong are common BRDF models.</p><h3 class="relative group">BRDFExplorer<div id=brdfexplorer class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#brdfexplorer aria-label=Anchor>#</a></span></h3><p>Can customize parameters, create your own BRDF, and view source code of common Shaders.</p><h2 class="relative group">07 3ColAmbient and Shadow<div id=07-3colambient-and-shadow class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#07-3colambient-and-shadow aria-label=Anchor>#</a></span></h2><h3 class="relative group">Three-Color Ambient Light<div id=three-color-ambient-light class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#three-color-ambient-light aria-label=Anchor>#</a></span></h3><p>This case uses the three channels of normal to create Top/Side/Bottom three-layer masks. Used to simulate the influence of three different directions of ambient light on the lighting model.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>float3</span> <span class=n>nDir</span> <span class=o>=</span> <span class=n>i</span><span class=p>.</span><span class=n>nDirWS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>TopMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>nDir</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>BotMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=o>-</span><span class=n>nDir</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>MidMask</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>TopMask</span> <span class=o>-</span> <span class=n>BotMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>EnvCol</span> <span class=o>=</span> <span class=n>_TopCol</span> <span class=o>*</span> <span class=n>TopMask</span> <span class=o>+</span> <span class=n>_MidCol</span> <span class=o>*</span> <span class=n>MidMask</span> <span class=o>+</span> <span class=n>_BotCol</span> <span class=o>*</span> <span class=n>BotMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>AO</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_AoMap</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>EnvLighting</span> <span class=o>=</span> <span class=n>EnvCol</span> <span class=o>*</span> <span class=n>AO</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=nf>float4</span><span class=p>(</span><span class=n>EnvLighting</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L07_3Col src=https://c143d82.webp.li/L07_3Col.png></figure></p><h3 class="relative group">Shadow<div id=shadow class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#shadow aria-label=Anchor>#</a></span></h3><p>Add shadows to the lighting model</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//Add shadows to Shader
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>struct</span> <span class=n>VertexOutput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=nf>LIGHTING_COORDS</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>)};</span><span class=c1>//Add LIGHT_COORDS to VertexOutput
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl><span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=nf>TRANSFER_VERTEX_TO_FRAGMENT</span><span class=p>(</span><span class=n>o</span><span class=p>)</span><span class=c1>//Add TRANSFER_VERTEX_TO_FRAGMENT to vertex shader
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>o</span><span class=p>;}</span>
</span></span><span class=line><span class=cl><span class=n>float4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>shadow</span> <span class=o>=</span> <span class=nf>LIGHT_ATTENUATION</span><span class=p>(</span><span class=n>i</span><span class=p>);</span><span class=c1>//Add LIGHT_ATTENUATION to fragment shader
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>...}</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L07_Shadow src=https://c143d82.webp.li/L07_Shadow.png></figure></p><h3 class="relative group">Lighting Composition<div id=lighting-composition class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#lighting-composition aria-label=Anchor>#</a></span></h3><div class=mermaid align=center><pre>
flowchart LR
    Lighting --> LightSource
    LightSource --> DiffuseHalfLambert
    LightSource --> SpecularPhong
    DiffuseHalfLambert --> OcclusionShadow
    SpecularPhong --> OcclusionShadow
    OcclusionShadow --> Result
    Lighting --> Environment
    Environment --> Diffuse1Col
    Environment --> SpecularCubemap
    Diffuse1Col --> OcclusionNoAO
    SpecularCubemap --> OcclusionNoAO
    OcclusionNoAO --> Result
    RimLight --> Result
    Emission --> Result
</pre></div><p>OldSchool case is the output result of the above lighting composition</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L07_OldSchool src=https://c143d82.webp.li/L07_OldSchool.png></figure></p><h2 class="relative group">08 NormalMap Implementation Principle<div id=08-normalmap-implementation-principle class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#08-normalmap-implementation-principle aria-label=Anchor>#</a></span></h2><p><figure><img class="my-0 rounded-md" loading=lazy alt=L08_TBN src=https://c143d82.webp.li/L08_TBN.png></figure></p><p>TBN: Tangent(Red), Bitangent(Blue), Normal(Green)</p><p>Normal maps record normal orientations in model space, which need to be converted to world space for normal display. Use TBN matrix to convert normal maps to world space. Conversion steps are as follows:</p><ol><li>Sample normal map and decode</li><li>Construct TBN matrix</li><li>Convert tangent space normal to world space</li><li>Output world space normal</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>posWS</span> <span class=o>=</span> <span class=nf>mul</span><span class=p>(</span><span class=n>unity_ObjectToWorld</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>nDirWS</span> <span class=o>=</span> <span class=nf>UnityObjectToWorldNormal</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>        <span class=n>o</span><span class=p>.</span><span class=n>tDirWS</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span> <span class=nf>mul</span><span class=p>(</span> <span class=n>unity_ObjectToWorld</span><span class=p>,</span> <span class=nf>float4</span><span class=p>(</span> <span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=mf>0.0</span> <span class=p>)</span> <span class=p>).</span><span class=n>xyz</span> <span class=p>);</span><span class=c1>//Tangent direction OStoWS
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>o</span><span class=p>.</span><span class=n>bDirWS</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span><span class=nf>cross</span><span class=p>(</span><span class=n>o</span><span class=p>.</span><span class=n>nDirWS</span><span class=p>,</span> <span class=n>o</span><span class=p>.</span><span class=n>tDirWS</span><span class=p>)</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>w</span><span class=p>);</span><span class=c1>//Calculate bDir based on nDir tDir
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nf>TRANSFER_VERTEX_TO_FRAGMENT</span><span class=p>(</span><span class=n>o</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>float4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Vectors
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>float3</span> <span class=n>nDirTS</span> <span class=o>=</span> <span class=nf>UnpackNormal</span><span class=p>(</span><span class=nf>tex2D</span><span class=p>(</span><span class=n>_NormalMap</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>)).</span><span class=n>rgb</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>float3x3</span> <span class=n>TBN</span> <span class=o>=</span> <span class=nf>float3x3</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>tDirWS</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>bDirWS</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>nDirWS</span><span class=p>);</span><span class=c1>//TBN matrix
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>float3</span> <span class=n>nDirWS</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span><span class=nf>mul</span><span class=p>(</span><span class=n>nDirTS</span><span class=p>,</span> <span class=n>TBN</span><span class=p>));</span><span class=c1>//Convert to world space
</span></span></span></code></pre></div><h2 class="relative group">09 Fresnel, Matcap, Cubemap<div id=09-fresnel-matcap-cubemap class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#09-fresnel-matcap-cubemap aria-label=Anchor>#</a></span></h2><h3 class="relative group">Fresnel<div id=fresnel class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#fresnel aria-label=Anchor>#</a></span></h3><p>Edge glow phenomenon, formula is nDotv, outputs 1 when nDir and vDir are perpendicular, outputs 0 when coincident, visually appears as model edge highlighting</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L09_Fresnel src=https://c143d82.webp.li/L09_Fresnel.png></figure></p><h3 class="relative group">Matcap<div id=matcap class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#matcap aria-label=Anchor>#</a></span></h3><p>View space normal mapping BRDF rendering result, only suitable for static display, Zbrush preview interface uses Matcap.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L09_Matcap src=https://c143d82.webp.li/L09_Matcap.png></figure></p><p>The texture is circular because MatcapMap takes the RG channels of nDirVS as mapping values, and the normal vector satisfies the following formula:</p><p>$$
x^2 + y^2 + z^2 = 1
$$</p><p>When only taking xy, the mapped result will be a circle</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L09_Matcap_Map src=https://c143d82.webp.li/L09_Matcap_Map.png></figure></p><h3 class="relative group">Cubemap<div id=cubemap class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#cubemap aria-label=Anchor>#</a></span></h3><p>Panoramic image, mapping the environment around the camera to a Cube. Mipmap shows different levels of clarity</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>float3</span> <span class=n>vrDirWS</span> <span class=o>=</span> <span class=nf>reflect</span><span class=p>(</span><span class=o>-</span><span class=n>vDirWS</span><span class=p>,</span> <span class=n>nDirWS</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>cubemap</span> <span class=o>=</span> <span class=nf>texCUBElod</span><span class=p>(</span><span class=n>_CubeMap</span><span class=p>,</span> <span class=nf>float4</span><span class=p>(</span><span class=n>vrDirWS</span><span class=p>,</span> <span class=n>_CubemapMip</span><span class=p>));</span>
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" loading=lazy alt=L09_Cubemap src=https://c143d82.webp.li/L09_Cubemap.png></figure></p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L09_Cubemap_Map src=https://c143d82.webp.li/L09_Cubemap_Map.png></figure></p><h2 class="relative group">10 Live Q&amp;A<div id=10-live-qa class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#10-live-qa aria-label=Anchor>#</a></span></h2><h3 class="relative group">Modified PBR<div id=modified-pbr class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#modified-pbr aria-label=Anchor>#</a></span></h3><p>One of the origins of PBR is the generalization of surface parameters. The more Shader functions are added, the more panel parameters there are. Finding physical relationships between parameters to reduce panel parameters is one of the contents of PBR. Modifying based on PBR&rsquo;s physics-based core is called modified PBR. Transplanting some PBR BRDF or texture names to traditional models is still traditional models, not called modified PBR.</p><p>The significance of mobile PBS physics-based core:</p><ol><li>Physics-based energy conservation</li><li>Physics-based surface property generalization</li><li>Microsurface theory</li></ol><h3 class="relative group">Changing UV<div id=changing-uv class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#changing-uv aria-label=Anchor>#</a></span></h3><p>Normal maps record normal information in tangent space. The main and secondary tangent directions in tangent space can be intuitively understood as the UV axis directions of the texture at the surface. When the model doesn&rsquo;t change but tangent space changes, the recorded normal information will also change.</p><h2 class="relative group">11 Common Parameters<div id=11-common-parameters class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#11-common-parameters aria-label=Anchor>#</a></span></h2><h3 class="relative group">Common Parameters and Functions<div id=common-parameters-and-functions class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#common-parameters-and-functions aria-label=Anchor>#</a></span></h3><ul><li>Values, ranges<ul><li>_Name (&ldquo;Name&rdquo;, float) = defaultVal</li><li>_Name (&ldquo;Name&rdquo;, range(min, max)) = defaultVal</li><li>_Name (&ldquo;Name&rdquo;, int) = defaultVal</li></ul></li><li>Position, vector, color<ul><li>_Name (&ldquo;Name&rdquo;, vector) = (xVal, yVal, zVal, wVal)</li><li>_Name (&ldquo;Name&rdquo;, color) = (rVal, gVal, bVal, aVal)</li></ul></li><li>2D, 3D textures, environment sphere<ul><li>_Name (&ldquo;Name&rdquo;, 2d) = &ldquo;defaultVal&rdquo; {}</li><li>_Name (&ldquo;Name&rdquo;, 3d) = &ldquo;defaultVal&rdquo; {}</li><li>_Name (&ldquo;Name&rdquo;, cube) = &ldquo;defaultVal&rdquo; {}</li></ul></li><li>[HideInInspector]<ul><li>Purpose: Hide this parameter in the panel</li><li>Can be used for: Any parameter</li><li>[HideInInspector] _FakeLightDir(&ldquo;Fake light direction&rdquo;, vector) = (0.0, 1.0, 0.0, 1.0)</li></ul></li><li>[NoScaleOffset]<ul><li>Purpose: Disable texture TilingOffset panel</li><li>Can be used for: Texture parameters</li><li>[NoScaleOffset] _MainTex (&ldquo;Main texture&rdquo;, 2d) = &ldquo;white&rdquo; {}</li></ul></li><li>[Normal]<ul><li>Purpose: Mark this texture parameter as normal map to activate related self-check functions</li><li>Can be used for: 2D texture parameters</li><li>Example: [Normal] _NormTex (&ldquo;Normal map&rdquo;, 2d) = &ldquo;bump&rdquo; {}</li></ul></li><li>[HDR]<ul><li>Purpose: Used to set high dynamic range color values; such as: light colors, emission colors, etc.</li><li>Can be used for: Color parameters</li><li>[HDR] _EmitCol (&ldquo;Emission color&rdquo;, color) = (1.0, 1.0, 1.0, 1.0)</li></ul></li><li>[Gamma]<ul><li>Purpose: Used for color space conversion of color parameters; generally used for projects with Linear color space</li><li>Can be used for: Color parameters</li><li>Example: [Gamma] _EmitCol (&ldquo;Emission color&rdquo;, color) = (1.0, 1.0, 1.0, 1.0)</li></ul></li><li>[PowerSlider(value)]<ul><li>Purpose: Perform Power processing on range parameters before passing to Shader; correct some parameter adjustment feel</li><li>Example: [PowerSlider(0.5)] _SpecPow (&ldquo;Specular power&rdquo;, range(1,90)) = 30</li></ul></li><li>[Header(Label)]<ul><li>Purpose: Label, used for layout</li><li>Can be used for: Standalone use</li><li>Example: [Header(Texture)]</li></ul></li><li>[Space(value)]<ul><li>Purpose: Empty line, used for layout</li><li>Can be used for: Standalone use</li><li>Example: [Space(50)]</li></ul></li></ul><h3 class="relative group">Common Parameter Types<div id=common-parameter-types class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#common-parameter-types aria-label=Anchor>#</a></span></h3><ul><li>fixed: 11-bit fixed point, -2.0 ~ 2.0, precision 1/256</li><li>half: 16-bit floating point, -60000 ~ 60000, precision about 3 decimal places</li><li>float: 32-bit floating point, -3.4E38 ~ 3.4E28, precision about 6, 7 decimal places</li><li>int: 32-bit integer, rarely used</li><li>bool: Boolean type, rarely used</li><li>Matrices:<ul><li>float2x2, float3x3, float4x4, float2x3 and similar formats</li><li>half2x2, half3x3, half4x4, half2x3 and similar formats</li></ul></li><li>Texture objects:<ul><li>sampler2D: 2D texture</li><li>sampler3D: 3D texture</li><li>samplerCUBE: Cube texture</li></ul></li></ul><h3 class="relative group">Parameter Usage Methods<div id=parameter-usage-methods class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#parameter-usage-methods aria-label=Anchor>#</a></span></h3><p>In principle, prioritize using the lowest precision data type</p><h4 class="relative group">Experience<div id=experience class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#experience aria-label=Anchor>#</a></span></h4><ul><li>World space positions and UV coordinates, use float</li><li>Vectors, HDR colors, use half; upgrade to float as needed</li><li>LDR colors, simple multipliers, can use fixed</li></ul><h4 class="relative group">Important Notes<div id=important-notes class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#important-notes aria-label=Anchor>#</a></span></h4><ul><li>Different platforms have different support for data types; generally automatic conversion, very rarely automatic conversion brings problems</li><li>On some platforms, data type precision conversion consumption is not small; so fixed should be used carefully</li><li>Discuss more with graphics developers</li></ul><h4 class="relative group">Accessible Vertex Input Data<div id=accessible-vertex-input-data class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#accessible-vertex-input-data aria-label=Anchor>#</a></span></h4><ul><li>POSITION Vertex position float3 float4</li><li>TEXCOORD0 UV channel 1 float2 float3 float4</li><li>TEXCOORD1 UV channel 2 float2 float3 float4</li><li>TEXCOORD2 UV channel 3 float2 float3 float4</li><li>TEXCOORD3 UV channel 4 float2 float3 float4</li><li>NORMAL Normal direction float3</li><li>TANGENT Tangent direction float4</li><li>COLOR Vertex color float4</li></ul><h4 class="relative group">Common Vertex Output Data (more customizable than the former)<div id=common-vertex-output-data-more-customizable-than-the-former class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#common-vertex-output-data-more-customizable-than-the-former aria-label=Anchor>#</a></span></h4><ul><li>pos Vertex position CS float4</li><li>uv0 General texture UV float2</li><li>uv1 LightmapUV float2</li><li>posWS Vertex position WS float3</li><li>nDirWS Normal direction WS half3</li><li>tDirWS Tangent direction WS half3</li><li>bDirWS Bitangent direction WS half3</li><li>color Vertex color fixed4</li></ul><h4 class="relative group">Common Vertex Shader Operations<div id=common-vertex-shader-operations class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#common-vertex-shader-operations aria-label=Anchor>#</a></span></h4><p>Note: Unity2019.3.2f1 version</p><ul><li><p>pos UnityObjectToClipPos(v.vertex);</p></li><li><p>uv0 o.uv0 = v.uv1; o.uv0 = TRANSFORM_TEX(v.uv0, _MainTex_ST);</p></li><li><p>uv1 o.uv1 = v.uv1; o.uv1 = v.uv1 * unity_LightmapST.xy + unity_LightmapST.zw;</p></li><li><p>posWS mul(unity_ObjectToWorld, v.vertex);</p></li><li><p>nDirWS UnityObjectToWorldNormal(v.normal);</p></li><li><p>tDirWS normalize(mul(unity_ObjectToWorld, float4(v.tangent.xyz, 0.0)).xyz);</p></li><li><p>bDirWS normalize(cross(o.nDirWS, o.tDirWS) * v.tangent.w);</p></li><li><p>color o.color = v.color;</p></li><li><p>Enable texture tiling</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_MainTex</span><span class=p>;</span> <span class=n>uniform</span> <span class=n>float4</span> <span class=n>_MainTex_ST</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=nf>TRANSFORM_TEX</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>uv0</span><span class=p>,</span> <span class=n>_MainTex</span><span class=p>);</span><span class=o>&amp;</span> <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv0</span> <span class=o>*</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>+</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>...}</span>
</span></span></code></pre></div><ul><li><p>Function modularization, code reuse</p><ul><li>Original writing</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>float</span> <span class=n>TopMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>nDirWS</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>BotMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=o>-</span><span class=n>nDirWS</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>MidMask</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>TopMask</span> <span class=o>-</span> <span class=n>BotMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>EnvCol</span> <span class=o>=</span> <span class=n>_TopCol</span> <span class=o>*</span> <span class=n>TopMask</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=n>_MidCol</span> <span class=o>*</span> <span class=n>MidMask</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=n>_BotCol</span> <span class=o>*</span> <span class=n>BotMask</span><span class=p>;</span>
</span></span></code></pre></div><ul><li>Modified version</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>float3</span> <span class=nf>TriColAmbient</span> <span class=p>(</span><span class=n>float3</span> <span class=n>n</span><span class=p>,</span> <span class=n>float3</span> <span class=n>uCol</span><span class=p>,</span> <span class=n>float3</span> <span class=n>sCol</span><span class=p>,</span> <span class=n>float3</span> <span class=n>dCol</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>uMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>n</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>dMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=o>-</span><span class=n>n</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>sMask</span> <span class=o>=</span> <span class=mf>1.0</span> <span class=o>-</span> <span class=n>uMask</span> <span class=o>-</span> <span class=n>dMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>float3</span> <span class=n>envCol</span> <span class=o>=</span> <span class=n>uCol</span> <span class=o>*</span> <span class=n>uMask</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                    <span class=n>sCol</span> <span class=o>*</span> <span class=n>sMask</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                    <span class=n>dCol</span> <span class=o>*</span> <span class=n>dMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>envCol</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>envCol</span> <span class=o>=</span> <span class=nf>TriColAmbient</span><span class=p>(</span><span class=n>nDirWS</span><span class=p>,</span> <span class=n>_EnvUpCol</span><span class=p>,</span> <span class=n>_EnvSideCol</span><span class=p>,</span> <span class=n>_EnvDownCol</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span></code></pre></div><ul><li>Modularization</li></ul><p>Create Assets\Cgnic\MyCgnic.cgnic</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#ifndef MY_CGINC
</span></span></span><span class=line><span class=cl><span class=cp>#define MY_CGINC
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>float3</span> <span class=nf>TriColAmbient</span> <span class=p>(</span><span class=n>float3</span> <span class=n>n</span><span class=p>,</span> <span class=n>float3</span> <span class=n>uCol</span><span class=p>,</span> <span class=n>float3</span> <span class=n>sCol</span><span class=p>,</span> <span class=n>float3</span> <span class=n>dCol</span><span class=p>){</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>uMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>n</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>dMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=o>-</span><span class=n>n</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>sMask</span> <span class=o>=</span> <span class=mf>1.0</span> <span class=o>-</span> <span class=n>uMask</span> <span class=o>-</span> <span class=n>dMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>envCol</span> <span class=o>=</span> <span class=n>uCol</span> <span class=o>*</span> <span class=n>uMask</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=n>sCol</span> <span class=o>*</span> <span class=n>sMask</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=n>dCol</span> <span class=o>*</span> <span class=n>dMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>envCol</span><span class=p>;}</span>
</span></span><span class=line><span class=cl><span class=cp>#endif
</span></span></span></code></pre></div><p>Add path under Shader CGPROGRAM</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>CGPROGRAM</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;../cginc/MyCginc.cginc&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>float3</span> <span class=n>envCol</span> <span class=o>=</span> <span class=nf>TriColAmbient</span><span class=p>(</span><span class=n>nDirWS</span><span class=p>,</span> <span class=n>_EnvUpCol</span><span class=p>,</span> <span class=n>_EnvSideCol</span><span class=p>,</span> <span class=n>_EnvDownCol</span><span class=p>);</span>
</span></span></code></pre></div></li></ul><h2 class="relative group">12 Ogre Case<div id=12-ogre-case class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#12-ogre-case aria-label=Anchor>#</a></span></h2><p>This case references <a href="https://support.steampowered.com/kb/3081-QUXN-6209/dota-2-workshop-item-shader-masks?l=finnish" target=_blank>https://support.steampowered.com/kb/3081-QUXN-6209/dota-2-workshop-item-shader-masks?l=finnish</a>
, combined with actual resources to create a typical character Shader.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt=L12_Ogre src=https://c143d82.webp.li/L12_Ogre.png></figure></p><h3 class="relative group">Code Example<div id=code-example-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#code-example-1 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>Shader</span> <span class=s>&#34;Zhuangdong/AP1/L06/L06_ogre_Feedback&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Properties</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nf>Header</span><span class=p>(</span><span class=n>Texture</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=nf>_MainTex</span> <span class=p>(</span><span class=s>&#34;RGB:Base color A:Transparency texture&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;White&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>Normal</span><span class=p>]</span> <span class=nf>_NormalMap</span> <span class=p>(</span><span class=s>&#34;RGB:Normal map&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;bump&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_DetailMap</span> <span class=p>(</span><span class=s>&#34;RGB:Detail texture A:Detail mask&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;black&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_MetalnessMask</span> <span class=p>(</span><span class=s>&#34;Metal mask&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;black&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_SelfIllMask</span> <span class=p>(</span><span class=s>&#34;SelfIll emission mask&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;black&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_SpecTex</span> <span class=p>(</span><span class=s>&#34;RGB:Spec highlight texture&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;gray&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_RimLight</span> <span class=p>(</span><span class=s>&#34;Rim edge light mask&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;black&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_BaseTintMask</span> <span class=p>(</span><span class=s>&#34;Tint base color mask&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;White&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_SpecularExponent</span> <span class=p>(</span><span class=s>&#34;SpecExpo specular reflection exponent&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;White&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_DiffuseWarp</span> <span class=p>(</span><span class=s>&#34;Diffuse diffusion mask&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;black&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_CubeMap</span> <span class=p>(</span><span class=s>&#34;RGB:Cube environment texture&#34;</span><span class=p>,</span> <span class=n>Cube</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;_Skybox&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=nf>_FresnelWarp</span><span class=p>(</span><span class=s>&#34;Fresnel texture R:FCol G:FRim B:FSpec&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;black&#34;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nf>Header</span><span class=p>(</span><span class=n>Diffuse</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=nf>_LightCol</span> <span class=p>(</span><span class=s>&#34;Main light color&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=mf>1.0</span><span class=p>,</span><span class=mf>1.0</span><span class=p>,</span><span class=mf>1.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nf>Space</span><span class=p>(</span><span class=mi>10</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=nf>_TopCol</span> <span class=p>(</span><span class=s>&#34;Top color&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>0.47</span><span class=p>,</span><span class=mf>0.96</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nf>_MidCol</span> <span class=p>(</span><span class=s>&#34;Middle color&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>0.46</span><span class=p>,</span><span class=mf>0.7</span><span class=p>,</span><span class=mf>0.45</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nf>_BotCol</span> <span class=p>(</span><span class=s>&#34;Bottom color&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>0.75</span><span class=p>,</span><span class=mf>0.39</span><span class=p>,</span><span class=mf>0.39</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nf>_EnvDiffInt</span> <span class=p>(</span><span class=s>&#34;EnvDiff ambient diffuse intensity&#34;</span><span class=p>,</span> <span class=nf>Range</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>5.0</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.2</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nf>Header</span><span class=p>(</span><span class=n>Specular</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=nf>_SpecPow</span><span class=p>(</span><span class=s>&#34;Highlight power&#34;</span><span class=p>,</span> <span class=nf>Range</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>90.0</span><span class=p>))</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>        <span class=nf>_SpecInt</span><span class=p>(</span><span class=s>&#34;Highlight intensity&#34;</span><span class=p>,</span> <span class=nf>Range</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>10.0</span><span class=p>))</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nf>Space</span><span class=p>(</span><span class=mi>10</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=nf>_EnvSpecint</span> <span class=p>(</span><span class=s>&#34;Envspec ambient specular intensity&#34;</span><span class=p>,</span> <span class=nf>Range</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>10.0</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.2</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nf>Header</span><span class=p>(</span><span class=n>SelfIll</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=nf>_SelfIllInt</span> <span class=p>(</span><span class=s>&#34;SelfIll emission intensity&#34;</span><span class=p>,</span> <span class=nf>Range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>))</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>HDR</span><span class=p>]</span><span class=nf>_RimCol</span> <span class=p>(</span><span class=s>&#34;Rim light color&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=mf>1.0</span><span class=p>,</span><span class=mf>1.0</span><span class=p>,</span><span class=mf>1.0</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>        <span class=nf>_RimInt</span> <span class=p>(</span><span class=s>&#34;Rim light intensity&#34;</span><span class=p>,</span> <span class=nf>Range</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>3.0</span><span class=p>))</span> <span class=o>=</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>HideInInspector</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=nf>_Cutoff</span> <span class=p>(</span><span class=s>&#34;Alpha cutoff&#34;</span><span class=p>,</span> <span class=nf>Range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>))</span> <span class=o>=</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>HideInInspector</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=nf>_Color</span> <span class=p>(</span><span class=s>&#34;Main Color&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span><span class=c1>//Fallback Require
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>SubShader</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Tags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s>&#34;RenderType&#34;</span> <span class=o>=</span> <span class=s>&#34;Opaque&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>Pass</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Name</span> <span class=s>&#34;FORWARD&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>Tags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;LightMode&#34;</span> <span class=o>=</span> <span class=s>&#34;ForwardBase&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>Cull</span> <span class=n>Off</span>
</span></span><span class=line><span class=cl>            <span class=n>CGPROGRAM</span> 
</span></span><span class=line><span class=cl>            <span class=err>#</span><span class=n>pragma</span> <span class=n>vertex</span> <span class=n>vert</span> 
</span></span><span class=line><span class=cl>            <span class=err>#</span><span class=n>pragma</span> <span class=n>fragment</span> <span class=n>frag</span> 
</span></span><span class=line><span class=cl>            <span class=err>#</span><span class=n>include</span> <span class=s>&#34;UnityCG.cginc&#34;</span> 
</span></span><span class=line><span class=cl>            <span class=err>#</span><span class=n>include</span> <span class=s>&#34;AutoLight.cginc&#34;</span><span class=c1>//Automatically handle lighting attenuation for shadow processing
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=cp>#include</span> <span class=cpf>&#34;Lighting.cginc&#34;//Mainly used to access ambient main directional light related data</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>            <span class=cp>#pragma multi_compile_fwdbase_fullshadows </span><span class=c1>//Enable shadow functionality
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=cp>#pragma target 3.0 
</span></span></span><span class=line><span class=cl><span class=cp></span>            <span class=c1>//Texture
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_MainTex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_NormalMap</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_DetailMap</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_MetalnessMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_SelfIllMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_SpecTex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_RimLight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_BaseTintMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_SpecularExponent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_DiffuseWarp</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>samplerCUBE</span> <span class=n>_CubeMap</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>sampler2D</span> <span class=n>_FresnelWarp</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=c1>//Diffuse
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>uniform</span> <span class=n>half3</span> <span class=n>_LightCol</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>fixed3</span> <span class=n>_TopCol</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>fixed3</span> <span class=n>_MidCol</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>fixed3</span> <span class=n>_BotCol</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>fixed</span>  <span class=n>_EnvDiffInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=c1>//Specular
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>uniform</span> <span class=n>half</span> <span class=n>_SpecPow</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>half</span> <span class=n>_SpecInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>half</span> <span class=n>_EnvSpecint</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=c1>//SelfIll
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>uniform</span> <span class=n>fixed</span> <span class=n>_SelfIllInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>half3</span> <span class=n>_RimCol</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>half</span> <span class=n>_RimInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uniform</span> <span class=n>half</span> <span class=n>_Cutoff</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>struct</span> <span class=n>VertexInput</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>//Check Document for meaning
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>float4</span> <span class=nl>vertex</span>  <span class=p>:</span> <span class=n>POSITION</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>                <span class=n>float2</span> <span class=nl>uv0</span>     <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>float3</span> <span class=nl>normal</span>  <span class=p>:</span> <span class=n>NORMAL</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>                <span class=n>float4</span> <span class=nl>tangent</span> <span class=p>:</span> <span class=n>TANGENT</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=k>struct</span> <span class=n>VertexOutput</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=c1>//Normal information
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>float4</span> <span class=nl>pos</span> <span class=p>:</span> <span class=n>SV_POSITION</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>                <span class=n>float2</span> <span class=nl>uv0</span> <span class=p>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>                <span class=n>float3</span> <span class=nl>posWS</span> <span class=p>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>                <span class=n>float3</span> <span class=nl>nDirWS</span> <span class=p>:</span> <span class=n>TEXCOORD2</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>                <span class=n>float3</span> <span class=nl>tDirWS</span> <span class=p>:</span> <span class=n>TEXCOORD3</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>                <span class=n>float3</span> <span class=nl>bDirWS</span> <span class=p>:</span> <span class=n>TEXCOORD4</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>                <span class=nf>LIGHTING_COORDS</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=n>VertexOutput</span> <span class=nf>vert</span><span class=p>(</span><span class=n>VertexInput</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=n>VertexOutput</span> <span class=n>o</span> <span class=o>=</span> <span class=p>(</span><span class=n>VertexOutput</span><span class=p>)</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=nf>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>                    <span class=n>o</span><span class=p>.</span><span class=n>uv0</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>uv0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>o</span><span class=p>.</span><span class=n>posWS</span> <span class=o>=</span> <span class=nf>mul</span><span class=p>(</span><span class=n>unity_ObjectToWorld</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>                    <span class=n>o</span><span class=p>.</span><span class=n>nDirWS</span> <span class=o>=</span> <span class=nf>UnityObjectToWorldNormal</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>o</span><span class=p>.</span><span class=n>tDirWS</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span> <span class=nf>mul</span><span class=p>(</span> <span class=n>unity_ObjectToWorld</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                     <span class=nf>float4</span><span class=p>(</span> <span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=mf>0.0</span> <span class=p>)</span> <span class=p>).</span><span class=n>xyz</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>o</span><span class=p>.</span><span class=n>bDirWS</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span><span class=nf>cross</span><span class=p>(</span><span class=n>o</span><span class=p>.</span><span class=n>nDirWS</span><span class=p>,</span> <span class=n>o</span><span class=p>.</span><span class=n>tDirWS</span><span class=p>)</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>w</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=nf>TRANSFER_VERTEX_TO_FRAGMENT</span><span class=p>(</span><span class=n>o</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>float4</span> <span class=nf>frag</span><span class=p>(</span><span class=n>VertexOutput</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>COLOR</span><span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=c1>//Vectors
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half3</span> <span class=n>nDirTS</span> <span class=o>=</span> <span class=nf>UnpackNormal</span><span class=p>(</span><span class=nf>tex2D</span><span class=p>(</span><span class=n>_NormalMap</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>)).</span><span class=n>rgb</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half3x3</span> <span class=n>TBN</span> <span class=o>=</span> <span class=nf>float3x3</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>tDirWS</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>bDirWS</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>nDirWS</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half3</span> <span class=n>nDirWS</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span><span class=nf>mul</span><span class=p>(</span><span class=n>nDirTS</span><span class=p>,</span> <span class=n>TBN</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=n>half3</span> <span class=n>vDirWS</span> <span class=o>=</span> <span class=nf>normalize</span><span class=p>(</span><span class=n>_WorldSpaceCameraPos</span><span class=p>.</span><span class=n>xyz</span> <span class=o>-</span> <span class=n>i</span><span class=p>.</span><span class=n>posWS</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half3</span> <span class=n>vrDirWS</span> <span class=o>=</span> <span class=nf>reflect</span><span class=p>(</span><span class=o>-</span><span class=n>vDirWS</span><span class=p>,</span> <span class=n>nDirWS</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half3</span> <span class=n>lDirWS</span> <span class=o>=</span> <span class=n>_WorldSpaceLightPos0</span><span class=p>.</span><span class=n>xyz</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>                <span class=c1>//Represents point light coordinates, normalization is safer, dot product results will be more correct
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half3</span> <span class=n>lrDirWS</span> <span class=o>=</span> <span class=nf>reflect</span><span class=p>(</span><span class=o>-</span><span class=n>lDirWS</span><span class=p>,</span> <span class=n>nDirWS</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=kt>float</span> <span class=n>shadow</span> <span class=o>=</span> <span class=nf>LIGHT_ATTENUATION</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>//Dot products
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half</span>  <span class=n>rDotv</span> <span class=o>=</span> <span class=nf>dot</span><span class=p>(</span><span class=n>vDirWS</span><span class=p>,</span> <span class=n>lrDirWS</span><span class=p>);</span><span class=c1>//Phong
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half</span>  <span class=n>nDotl</span> <span class=o>=</span> <span class=nf>dot</span><span class=p>(</span><span class=n>nDirWS</span><span class=p>,</span> <span class=n>lDirWS</span><span class=p>);</span><span class=c1>//Lambert
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half</span>  <span class=n>ndotv</span> <span class=o>=</span> <span class=nf>dot</span><span class=p>(</span><span class=n>nDirWS</span><span class=p>,</span> <span class=n>vDirWS</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>//Sample textures
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half4</span> <span class=n>var_MainTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half4</span> <span class=n>var_DetailMap</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_DetailMap</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>var_MetalnessMask</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_MetalnessMask</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span> <span class=n>var_SelfIllMask</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_SelfIllMask</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span> <span class=n>var_SpecTex</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_SpecTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span><span class=c1>//specInt
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half</span>  <span class=n>var_RimLight</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_RimLight</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>var_BaseTintMask</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_BaseTintMask</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>var_SpecularExponent</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_SpecularExponent</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv0</span><span class=p>);</span><span class=c1>//specSize
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half3</span> <span class=n>var_Cubemap</span> <span class=o>=</span> <span class=nf>texCUBElod</span><span class=p>(</span><span class=n>_CubeMap</span><span class=p>,</span> <span class=nf>float4</span><span class=p>(</span><span class=n>vrDirWS</span><span class=p>,</span> <span class=nf>lerp</span><span class=p>(</span><span class=mf>8.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>var_MetalnessMask</span><span class=p>))).</span><span class=n>rgb</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half3</span> <span class=n>var_FresnelWarp</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_FresnelWarp</span><span class=p>,</span> <span class=n>ndotv</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>//Extract information
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>half3</span> <span class=n>BaseCol</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>Opacity</span> <span class=o>=</span> <span class=n>var_MainTex</span><span class=p>.</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>MetalMask</span> <span class=o>=</span> <span class=n>var_MetalnessMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>RimLightInt</span> <span class=o>=</span> <span class=n>var_RimLight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>TintMask</span> <span class=o>=</span> <span class=n>var_BaseTintMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>SpecExp</span> <span class=o>=</span> <span class=n>var_SpecularExponent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half3</span> <span class=n>EnvCube</span> <span class=o>=</span> <span class=n>var_Cubemap</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>SpecInt</span> <span class=o>=</span> <span class=n>var_SpecTex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>half</span>  <span class=n>EmitInt</span> <span class=o>=</span> <span class=n>var_SelfIllMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=c1>//Lighting model
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half3</span> <span class=n>DiffCol</span> <span class=o>=</span> <span class=nf>lerp</span><span class=p>(</span><span class=n>BaseCol</span><span class=p>,</span> <span class=nf>half3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=mf>0.0</span><span class=p>,</span><span class=mf>0.0</span><span class=p>),</span> <span class=n>MetalMask</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//The closer to metal, the weaker the diffuse reflection
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half3</span> <span class=n>SpecCol</span> <span class=o>=</span> <span class=nf>lerp</span><span class=p>(</span><span class=n>BaseCol</span><span class=p>,</span> <span class=nf>half3</span><span class=p>(</span><span class=mf>0.3</span><span class=p>,</span><span class=mf>0.3</span><span class=p>,</span><span class=mf>0.3</span><span class=p>),</span> <span class=n>TintMask</span><span class=p>)</span> <span class=o>*</span> <span class=n>SpecInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//Determine highlight color based on TintMask
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//0.3 is an empirical value, this value multiplied by highlight intensity specInt gives a comfortable highlight color texture
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//Fresnel
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half3</span> <span class=n>Fresnel</span> <span class=o>=</span> <span class=nf>lerp</span><span class=p>(</span><span class=n>var_FresnelWarp</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=n>MetalMask</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//The higher the metalness, the less obvious the Fresnel phenomenon
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half</span>  <span class=n>FreCol</span> <span class=o>=</span> <span class=n>Fresnel</span><span class=p>.</span><span class=n>r</span><span class=p>;</span> <span class=c1>//No practical use
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half</span>  <span class=n>FreRim</span> <span class=o>=</span> <span class=n>Fresnel</span><span class=p>.</span><span class=n>g</span><span class=p>;</span> <span class=c1>//Use Fresnel for rim light
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half</span>  <span class=n>FreSpec</span> <span class=o>=</span> <span class=n>Fresnel</span><span class=p>.</span><span class=n>b</span><span class=p>;</span> <span class=c1>//Use Fresnel for specular reflection
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//Main light diffuse reflection
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half</span>  <span class=n>HalfLambert</span> <span class=o>=</span> <span class=n>nDotl</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=mf>0.5</span><span class=p>;</span><span class=c1>//Halflambert
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half3</span> <span class=n>var_DiffuseWarp</span> <span class=o>=</span> <span class=nf>tex2D</span><span class=p>(</span><span class=n>_DiffuseWarp</span><span class=p>,</span> <span class=nf>half2</span><span class=p>(</span><span class=n>HalfLambert</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//Sample Ramptexture
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half3</span> <span class=n>DirDiff</span> <span class=o>=</span> <span class=n>DiffCol</span> <span class=o>*</span> <span class=n>var_DiffuseWarp</span> <span class=o>*</span> <span class=n>_LightCol</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//Main light specular reflection
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half</span> <span class=n>Phong</span> <span class=o>=</span> <span class=nf>pow</span><span class=p>(</span><span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>rDotv</span><span class=p>),</span> <span class=n>SpecExp</span> <span class=o>*</span> <span class=n>_SpecPow</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>half</span> <span class=n>Spec</span> <span class=o>=</span> <span class=n>Phong</span> <span class=o>*</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=n>nDotl</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>Spec</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=n>Spec</span><span class=p>,</span> <span class=n>FreSpec</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//Will have a glossy visual effect, strong Fresnel phenomenon mixed with Phong
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>Spec</span> <span class=o>=</span> <span class=n>Spec</span> <span class=o>*</span> <span class=n>_SpecInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//After multiplying by SpecInt, most of the previous Spec effects will disappear, only the range specified by SpecInt will have highlights
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//The original Shader integrates all specular reflections together and finally does max(flMetalnessMask, flSpecWarp)
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//Here the author splits specular reflections, so both sides need to do a max at the final calculation
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half3</span> <span class=n>DirSpec</span> <span class=o>=</span> <span class=n>SpecCol</span> <span class=o>*</span> <span class=n>Spec</span> <span class=o>*</span> <span class=n>_LightCol</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//Ambient diffuse reflection
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=kt>float</span> <span class=n>TopMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>nDirWS</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=kt>float</span> <span class=n>BotMask</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=o>-</span><span class=n>nDirWS</span><span class=p>.</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=kt>float</span> <span class=n>MidMask</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>TopMask</span> <span class=o>-</span> <span class=n>BotMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>float3</span> <span class=n>EnvCol</span> <span class=o>=</span> <span class=n>_TopCol</span> <span class=o>*</span> <span class=n>TopMask</span> <span class=o>+</span> 
</span></span><span class=line><span class=cl>                                    <span class=n>_MidCol</span> <span class=o>*</span> <span class=n>MidMask</span> <span class=o>+</span> 
</span></span><span class=line><span class=cl>                                    <span class=n>_BotCol</span> <span class=o>*</span> <span class=n>BotMask</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>float3</span> <span class=n>EnvDiff</span> <span class=o>=</span> <span class=n>DiffCol</span> <span class=o>*</span> <span class=n>EnvCol</span> <span class=o>*</span> <span class=n>_EnvDiffInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//The video author only used single color, here I directly copied the previous case code without modification
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//Ambient specular reflection
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half</span> <span class=n>ReflectInt</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=n>FreSpec</span><span class=p>,</span> <span class=n>MetalMask</span><span class=p>)</span> <span class=o>*</span> <span class=n>SpecInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//Metal parts have maximum MetalMask, non-metal parts have maximum FreSpec
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//This way non-metal has strong Fresnel phenomenon, metal parts have little, instead have strong reflection phenomenon
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half3</span> <span class=n>EnvSpec</span> <span class=o>=</span> <span class=n>SpecCol</span> <span class=o>*</span> <span class=n>ReflectInt</span> <span class=o>*</span> <span class=n>EnvCube</span> <span class=o>*</span> <span class=n>_EnvSpecint</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//Rim light
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half3</span> <span class=n>RimLight</span> <span class=o>=</span> <span class=n>_RimCol</span> <span class=o>*</span> <span class=n>FreRim</span> <span class=o>*</span> <span class=n>RimLightInt</span> <span class=o>*</span> <span class=nf>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>nDirWS</span><span class=p>.</span><span class=n>g</span><span class=p>)</span> <span class=o>*</span> <span class=n>_RimInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//Rim light only appears on top, so need to use normal.g
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//FreRim defines Fresnel phenomenon, RimLightInt defines intensity range, RimInt defines intensity
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//Emission
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>float3</span> <span class=n>emission</span> <span class=o>=</span> <span class=n>EmitInt</span> <span class=o>*</span> <span class=n>DiffCol</span> <span class=o>*</span> <span class=n>_SelfIllInt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//Final
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>half3</span> <span class=n>FinalRGB</span> <span class=o>=</span> <span class=p>(</span><span class=n>DirDiff</span> <span class=o>+</span> <span class=n>DirSpec</span><span class=p>)</span> <span class=o>*</span> <span class=n>shadow</span> <span class=o>+</span> <span class=n>EnvDiff</span> <span class=o>+</span> <span class=n>EnvSpec</span> <span class=o>+</span> <span class=n>RimLight</span> <span class=o>+</span> 
</span></span><span class=line><span class=cl>                    <span class=n>emission</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=nf>clip</span><span class=p>(</span><span class=n>Opacity</span> <span class=o>-</span> <span class=n>_Cutoff</span><span class=p>);</span><span class=c1>//Delete all less than _Cutoff, keep those greater than
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=nf>float4</span><span class=p>(</span><span class=n>FinalRGB</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>ENDCG</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>Fallback</span> <span class=s>&#34;Legacy Shaders/Transparent/Cutout/VertexLit&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Note: Using FallBack requires declaring a _Color: color, even if you don&#39;t use it
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Main Issues<div id=main-issues class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#main-issues aria-label=Anchor>#</a></span></h3><ul><li>Fallback setting: Specify to a Shader that supports transparency textures (such as Legacy Shaders/Transparent/Cutout/VertexLit).</li><li>Cull Off: Turn off backface culling to prevent model back faces from being clipped.</li></ul><h3 class="relative group">Texture Explanation<div id=texture-explanation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#texture-explanation aria-label=Anchor>#</a></span></h3><h4 class="relative group">Non-shared textures:<div id=non-shared-textures class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#non-shared-textures aria-label=Anchor>#</a></span></h4><ul><li>Color</li><li>MetalnessMask</li><li>Normal</li><li>RimMask</li><li>SelfIllumMask</li><li>SpecularExponent</li><li>SpecularMask</li><li>TintByBaseMask</li><li>Translucency</li></ul><h4 class="relative group">Shared textures<div id=shared-textures class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#shared-textures aria-label=Anchor>#</a></span></h4><ul><li>Cubemap</li><li>DiffuseWarp RampTex</li><li>FresnelWarpColor</li><li>FresnelWarpRim</li><li>FresnelWarpSpec</li></ul><h4 class="relative group">Texture merging<div id=texture-merging class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#texture-merging aria-label=Anchor>#</a></span></h4><ul><li>Color: RGB: Color A: Opacity</li><li>Mask1: R: SpecInt G: RimInt B: TintMask A: SpecPow</li><li>Mask2: R:FresnelCol G: FresnelRim B: FresnelSpec</li></ul><h3 class="relative group">Texture Description<div id=texture-description class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#texture-description aria-label=Anchor>#</a></span></h3><ul><li>MetalnessMask: Metal mask, controls metal areas</li><li>SpecularMask: Highlight intensity mask</li><li>RimlightMask: Edge light mask</li><li>BaseTintMask: Highlight tinting mask, metal highlight color determined by ColorMap</li><li>FresnelTex: Three RampTex, mapped to Fresnel lighting model</li><li>Other textures such as ColorMap, Transparency, NormalMap, SelfIlluminationMask, SpecularExponent, DiffuseMask, DetailMask have been encountered in previous cases, or are not used in this case, not detailed here</li></ul><h3 class="relative group">Source Code Explanation<div id=source-code-explanation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#source-code-explanation aria-label=Anchor>#</a></span></h3><ul><li><p>RimLightScale, SpecScale: Fixed values, different for different characters, mainly used for rim light and highlight calculations.</p></li><li><p>SpecularScale, RimLightScale and other parameters that exist in source code, the author removed them without affecting the final effect and simplified the code.</p></li><li><p>Fresnel and rim light: Different characters have different RimLightScale settings, mostly numbers greater than 1. Based on this, through FresnelWarp texture and RimMask to control the intensity and range of edge highlights, exaggerated cartoon edge effects can be achieved.</p></li><li><p>FresnelWarpSpec is called flSpecWarp in the original Shader, used to define the character&rsquo;s ambient specular reflection.</p></li><li><p>Highlight and metal control: Metal parts use cubemap reflection, non-metal parts use highlight texture control. Through <code>cSpecular *= max(flMetalnessMask, flSpecWarp);</code> to achieve highlight switching between metal and non-metal.</p></li><li><p>Main light specular reflection: Dota2 uses an algorithm more suitable for top-down view, core code as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>vec3</span> <span class=n>R</span> <span class=o>=</span> <span class=nf>reflect</span> <span class=p>(</span><span class=n>V</span><span class=p>,</span> <span class=n>N</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>RdotL</span> <span class=o>=</span> <span class=nf>clamp</span><span class=p>(</span><span class=nf>dot</span><span class=p>(</span><span class=n>L</span><span class=p>,</span> <span class=o>-</span><span class=n>R</span><span class=p>),</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
</span></span></code></pre></div><p>From this we can know that the closer R and L are, the brighter the light. Compared to traditional Phong, it&rsquo;s more suitable for Dota2&rsquo;s god&rsquo;s-eye view.</p></li></ul><h3 class="relative group">Lighting Composition<div id=lighting-composition-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#lighting-composition-1 aria-label=Anchor>#</a></span></h3><div class=mermaid align=center><pre>
flowchart LR
    Lighting --> LightSource
    LightSource --> DiffuseHalfLambert
    LightSource --> SpecularPhong
    DiffuseHalfLambert --> OcclusionShadow
    SpecularPhong --> OcclusionShadow
    OcclusionShadow --> Result
    Lighting --> Environment
    Environment --> Diffuse1Col
    Environment --> SpecularCubemap
    Diffuse1Col --> OcclusionNoAO
    SpecularCubemap --> OcclusionNoAO
    OcclusionNoAO --> Result
    RimLight --> Result
    Emission --> Result
</pre></div><h3 class="relative group">Experience Summary<div id=experience-summary class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#experience-summary aria-label=Anchor>#</a></span></h3><p>The video case splits the original code and integrates it into its own system, making it easier to understand and extend. Beginners tend to ignore the role of Fresnel textures, it&rsquo;s recommended to refer more to Dota2 original Shader and</p></div><h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><a href=/notes/courses/zhuangdongcourse/lightingmap/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/notes/courses/zhuangdongcourse/lightingmap/featured_hu_10528a2cb8acaf49.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/notes/courses/zhuangdongcourse/lightingmap/>Zhuangdong_Course_Note_LightingMap</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><span>3802 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">18 mins</span></div></div><div class="py-1 prose dark:prose-invert"></div></div><div class="px-6 pt-4 pb-2"></div></div></a><a href=/notes/courses/zhuangdongcourse/vfxshader/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/notes/courses/zhuangdongcourse/vfxshader/featured_hu_10528a2cb8acaf49.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/notes/courses/zhuangdongcourse/vfxshader/>Zhuangdong_Course_Note_VFXShader</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><span>4105 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">20 mins</span></div></div><div class="py-1 prose dark:prose-invert"></div></div><div class="px-6 pt-4 pb-2"></div></div></a><a href=/notes/foundation/linearalgebra/essenceoflinearalgebra_part1/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/notes/foundation/linearalgebra/essenceoflinearalgebra_part1/featured_hu_10528a2cb8acaf49.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/notes/foundation/linearalgebra/essenceoflinearalgebra_part1/>EssenceOfLinearAlgebra - 01</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><span>512 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">3 mins</span></div></div><div class="py-1 prose dark:prose-invert"></div></div><div class="px-6 pt-4 pb-2"></div></div></a></section></div><script type=text/javascript src=/js/page.min.407e5b2727c1f241c95d53db24c776bea71bfc18e09511b815d669ad8caca6e9e18a53864ad364b1ccccfa2f2956768d33cfe193bfb64d3406f3b5ece354ba57.js integrity="sha512-QH5bJyfB8kHJXVPbJMd2vqcb/BjglRG4FdZprYyspunhilOGStNksczM+i8pVnaNM8/hk7+2TTQG87Xs41S6Vw==" data-oid=views_Notes/Courses/zhuangdongcourse/forwardrendering/index.md data-oid-likes=likes_Notes/Courses/zhuangdongcourse/forwardrendering/index.md></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span></span><span><a class="flex text-right group ml-3" href=/notes/courses/zhuangdongcourse/lightingmap/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Zhuangdong_Course_Note_LightingMap</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"></span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href title>Changelog</a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">© 2025 Runming Chen. All Rights Reserved.</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-index-500" data-url=https://rcrunming.com/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>